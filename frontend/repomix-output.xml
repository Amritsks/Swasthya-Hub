This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitignore
eslint.config.js
index.html
package.json
postcss.config.cjs
public/robots.txt
public/vite.svg
src/App.jsx
src/assets/react.svg
src/components/Navbar.jsx
src/components/phoneMockup.jsx
src/components/UserSidebar.jsx
src/context/AuthContext.jsx
src/hooks/useSocket.js
src/index.css
src/layout/Layout.jsx
src/main.jsx
src/screens/AdminDashboard.jsx
src/screens/AdminLogin.jsx
src/screens/AI.jsx
src/screens/Aushadhi.jsx
src/screens/Auth.jsx
src/screens/Cart.jsx
src/screens/Checkout.jsx
src/screens/Dashboard.jsx
src/screens/Doctor.jsx
src/screens/Lab.jsx
src/screens/Login.jsx
src/screens/PharmacistLogin.jsx
src/screens/PharmacyAdmin.jsx
src/screens/Profile.jsx
src/screens/Raksha.jsx
src/screens/Suraksha.jsx
src/screens/UserDashboard.jsx
src/services/api.js
tailwind.config.js
vercel.json
vite.config.js
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".gitignore">
# Environment variables
.env
.env.local
.env.production
.env.development

# Node modules
node_modules/

# Build output
dist/
build/

# Logs
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# OS files
.DS_Store
Thumbs.db
</file>

<file path="eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{js,jsx}'],
    extends: [
      js.configs.recommended,
      reactHooks.configs['recommended-latest'],
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
      parserOptions: {
        ecmaVersion: 'latest',
        ecmaFeatures: { jsx: true },
        sourceType: 'module',
      },
    },
    rules: {
      'no-unused-vars': ['error', { varsIgnorePattern: '^[A-Z_]' }],
    },
  },
])
</file>

<file path="index.html">
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SvasthyaHub</title>
    <meta name="robots" content="noindex, nofollow" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
</file>

<file path="package.json">
{
  "name": "swasthyahub",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "axios": "^1.12.2",
    "dotenv": "^17.2.3",
    "framer-motion": "^10.18.0",
    "lucide-react": "^0.544.0",
    "react": "^18.3.1",
    "react-confetti": "^6.4.0",
    "react-dom": "^18.3.1",
    "react-router-dom": "^7.9.1",
    "socket.io-client": "^4.8.1"
  },
  "devDependencies": {
    "@eslint/js": "^9.33.0",
    "@types/react": "^19.1.10",
    "@types/react-dom": "^19.1.7",
    "@vitejs/plugin-react": "^5.0.0",
    "autoprefixer": "^10.4.21",
    "baseline-browser-mapping": "^2.9.11",
    "eslint": "^9.33.0",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.20",
    "globals": "^16.3.0",
    "postcss": "^8.5.6",
    "repomix": "^1.5.0",
    "tailwindcss": "^3.4.17",
    "vite": "^7.1.2"
  }
}
</file>

<file path="postcss.config.cjs">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
</file>

<file path="public/robots.txt">
User-agent: *
Disallow:
</file>

<file path="public/vite.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
</file>

<file path="src/App.jsx">
import React from "react";
import {
  BrowserRouter as Router,
  Routes,
  Route,
  Navigate,
} from "react-router-dom";

import Navbar from "./components/Navbar";
import UserSidebar from "./components/UserSidebar";

import Dashboard from "./screens/Dashboard";
import UserDashboard from "./screens/UserDashboard";
import Suraksha from "./screens/Suraksha";
import Aushadhi from "./screens/Aushadhi";
import Raksha from "./screens/Raksha";
import Profile from "./screens/Profile";
import Doctor from "./screens/Doctor";
import Labtest from "./screens/Lab";
import Healthassist from "./screens/AI";
import Login from "./screens/Login";
import PharmacyAdmin from "./screens/PharmacyAdmin";
import PharmacistLogin from "./screens/PharmacistLogin";
import AdminLogin from "./screens/AdminLogin";
import AdminDashboard from "./screens/AdminDashboard";

import { useAuth } from "./context/AuthContext";

const App = () => {
  const { user, role } = useAuth(); // ‚úÖ single source of truth

  return (
    <Router>
      <div className="min-h-screen bg-slate-50">
        {/* Top Navbar (mobile + desktop header) */}
        <Navbar />

        {/* ‚úÖ Sidebar ONLY for USER on md+ */}
        {role === "user" && (
          <UserSidebar userName={user?.name || "User"} />
        )}

        {/* Main Content */}
        <main className={role === "user" ? "md:ml-64 pt-16" : "pt-16"}>
          <Routes>
            {/* ---------- HOME ---------- */}
            <Route
              path="/"
              element={
                role === "admin" ? (
                  <Navigate to="/admin/dashboard" replace />
                ) : role === "pharmacist" ? (
                  <Navigate to="/pharmacy-admin" replace />
                ) : role === "user" ? (
                  <Navigate to="/userdashboard" replace />
                ) : (
                  <Dashboard />
                )
              }
            />

            {/* ---------- PUBLIC ---------- */}
            <Route
              path="/login"
              element={role === "guest" ? <Login /> : <Navigate to="/" replace />}
            />

            {/* ---------- USER ---------- */}
            <Route
              path="/userdashboard"
              element={role === "user" ? <UserDashboard /> : <Navigate to="/login" replace />}
            />
            <Route
              path="/profile"
              element={role === "user" ? <Profile /> : <Navigate to="/login" replace />}
            />
            <Route
              path="/suraksha"
              element={role === "user" ? <Suraksha /> : <Navigate to="/login" replace />}
            />
            <Route
              path="/raksha"
              element={role === "user" ? <Raksha /> : <Navigate to="/login" replace />}
            />
            <Route
              path="/aushadhi"
              element={role === "user" ? <Aushadhi /> : <Navigate to="/login" replace />}
            />
            <Route
              path="/doctor"
              element={role === "user" ? <Doctor /> : <Navigate to="/login" replace />}
            />
            <Route
              path="/labtest"
              element={role === "user" ? <Labtest /> : <Navigate to="/login" replace />}
            />
            <Route
              path="/healthassist"
              element={role === "user" ? <Healthassist /> : <Navigate to="/login" replace />}
            />

            {/* ---------- PHARMACIST ---------- */}
            <Route
              path="/pharmacist-login"
              element={role === "guest" ? <PharmacistLogin /> : <Navigate to="/" replace />}
            />
            <Route
              path="/pharmacy-admin"
              element={role === "pharmacist" ? <PharmacyAdmin /> : <Navigate to="/pharmacist-login" replace />}
            />

            {/* ---------- ADMIN ---------- */}
            <Route
              path="/admin/login"
              element={role === "guest" ? <AdminLogin /> : <Navigate to="/" replace />}
            />
            <Route
              path="/admin/dashboard"
              element={role === "admin" ? <AdminDashboard /> : <Navigate to="/admin/login" replace />}
            />

            {/* ---------- FALLBACK ---------- */}
            <Route path="*" element={<Navigate to="/" replace />} />
          </Routes>
        </main>
      </div>
    </Router>
  );
};

export default App;
</file>

<file path="src/assets/react.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>
</file>

<file path="src/components/Navbar.jsx">
import React, { useState, useRef, useEffect } from "react";
import { Link, useNavigate } from "react-router-dom";
import { Menu, X } from "lucide-react";
import { useAuth } from "../context/AuthContext";

const Navbar = () => {
  const [isOpen, setIsOpen] = useState(false);
  const navigate = useNavigate();
  const { user, pharmacist, admin, logout } = useAuth();
  const menuRef = useRef(null);

  const isAdmin = !!localStorage.getItem("adminToken");
  const isPharmacist = !!localStorage.getItem("pharmacistToken");

  const handleLogout = () => {
    logout?.();
    navigate("/", { replace: true });
  };

  // Close menu when clicking outside (mobile only)
  useEffect(() => {
    const handleClickOutside = (e) => {
      if (menuRef.current && !menuRef.current.contains(e.target)) {
        setIsOpen(false);
      }
    };

    if (isOpen) {
      document.addEventListener("mousedown", handleClickOutside);
    }

    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, [isOpen]);

  /* ---------------- LINKS ---------------- */
 const guestLinks = (
  <div className="flex flex-col gap-3">
    <Link to="/" className="hover:text-teal-700">
      Dashboard
    </Link>

    <div className="border-t pt-2">
      <p className="text-sm font-semibold text-gray-600 mb-1">Login as:</p>

      <div className="flex flex-col gap-1 pl-2">
        <Link
          to="/login"
          className="block text-sm hover:text-teal-700"
        >
          User
        </Link>

        <Link
          to="/admin/login"
          className="block text-sm hover:text-teal-700"
        >
          Admin
        </Link>

        <Link
          to="/pharmacist-login"
          className="block text-sm hover:text-teal-700"
        >
          Pharmacist
        </Link>
      </div>
    </div>
  </div>
);


  const userLinks = (
  <div className="flex flex-col gap-2">
    <Link to="/userdashboard" className="block py-2 hover:text-teal-700">
      Dashboard
    </Link>

    <Link to="/profile" className="block py-2 hover:text-teal-700">
      Profile
    </Link>

    <Link to="/aushadhi" className="block py-2 hover:text-teal-700">
      Aushadhi
    </Link>

    <Link to="/suraksha" className="block py-2 hover:text-teal-700">
      Suraksha
    </Link>

    <Link to="/raksha" className="block py-2 hover:text-teal-700">
      Raksha
    </Link>

    <button
      onClick={handleLogout}
      className="block py-2 text-left hover:text-red-600"
    >
      Logout
    </button>
  </div>
);


  const pharmacistLinks = (
  <div className="flex flex-col gap-2">
    {/* {pharmacist && (
      <Link
        to="/pharmacy-admin"
        className="block py-2 hover:text-teal-700"
      >
        Pharmacy Dashboard
      </Link>
    )} */}

    <button
      onClick={handleLogout}
      className="block py-2 text-left hover:text-red-600"
    >
      Logout
    </button>
  </div>
);


  const adminLinks = (
    <>
      {/* <Link to="/admin/dashboard">Admin Dashboard</Link> */}
      <button onClick={handleLogout}>Logout</button>
    </>
  );

  return (
    <nav className="h-16 bg-white p-4 shadow-md fixed top-0 left-0 right-0 z-50">
      <div className="max-w-7xl mx-auto flex justify-between items-center">
        {/* LOGO (always visible) */}
        <Link to="/" className="text-xl font-bold">
          SvasthyaHub
        </Link>

        {/* MENU ICON ‚Äî MOBILE ONLY */}
        <div ref={menuRef} className={`relative ${user ? "md:hidden" : ""}`}>
          <button onClick={() => setIsOpen(!isOpen)}>
            {isOpen ? <X /> : <Menu />}
          </button>

          {/* DROPDOWN */}
          {isOpen && (
            <div className="absolute right-0 mt-2 w-48 bg-white rounded shadow-lg p-4 z-50">
              {!user && !isAdmin && !isPharmacist && guestLinks}
              {user && userLinks}
              {isPharmacist && pharmacistLinks}
              {isAdmin && adminLinks}
            </div>
          )}
        </div>
      </div>
    </nav>
  );
};

export default Navbar;
</file>

<file path="src/components/phoneMockup.jsx">
import React from "react";

const PhoneMockup = ({ children }) => {
  return (
    <div className="relative w-full max-w-sm h-[800px] mx-auto bg-white rounded-3xl shadow-2xl overflow-hidden">
      {children}
    </div>
  );
};

export default PhoneMockup;
</file>

<file path="src/components/UserSidebar.jsx">
import { Link, useNavigate } from "react-router-dom";
import { useAuth } from "../context/AuthContext";

/* ---------------- ICON COMPONENT ---------------- */
const Icon = ({ children, className }) => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    strokeWidth="2"
    strokeLinecap="round"
    strokeLinejoin="round"
    className={className}
  >
    {children}
  </svg>
);

const Icons = {
  Home: () => (
    <Icon className="w-5 h-5">
      <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
    </Icon>
  ),
  Truck: () => (
    <Icon className="w-5 h-5">
      <rect x="1" y="3" width="15" height="13" />
      <polygon points="16 8 20 8 23 11 23 16 16 16 16 8" />
      <circle cx="5.5" cy="18.5" r="2.5" />
      <circle cx="18.5" cy="18.5" r="2.5" />
    </Icon>
  ),
  Box: () => (
    <Icon className="w-5 h-5">
      <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4" />
    </Icon>
  ),
  Drop: () => (
    <Icon className="w-5 h-5">
      <path d="M12 2.69l5.74 5.74c2.58 2.58 2.58 6.76 0 9.34a6.6 6.6 0 0 1-9.34 0c-2.58-2.58-2.58-6.76 0-9.34L12 2.69z" />
    </Icon>
  ),
  Image: () => (
    <Icon className="w-5 h-5">
      <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
      <circle cx="8.5" cy="8.5" r="1.5" />
      <polyline points="21 15 16 10 5 21" />
    </Icon>
  ),
  Logout: () => (
    <Icon className="w-5 h-5">
      <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
      <polyline points="16 17 21 12 16 7" />
      <line x1="21" y1="12" x2="9" y2="12" />
    </Icon>
  ),
};

const UserSidebar = ({ userName }) => {
  const navigate = useNavigate();
  const { logout } = useAuth();

  const handleLogout = () => {
    logout?.();
    navigate("/", { replace: true });
  };

  return (
    <aside className="hidden md:fixed md:flex left-0 top-16 h-[calc(100vh-4rem)] w-64 bg-white border-r border-slate-200 z-20 flex-col">
      {/* NAV LINKS */}
      <nav className="flex-1 p-4 space-y-2 overflow-y-auto">
        <Link to="/userdashboard" className="sidebar-link active">
          <Icons.Home /> Home
        </Link>

        <Link to="/orders" className="sidebar-link">
          <Icons.Truck /> My Orders
        </Link>

        <Link to="/aushadhi" className="sidebar-link">
          <Icons.Box /> Order Medicines
        </Link>

        <Link to="/raksha" className="sidebar-link">
          <Icons.Drop /> Blood Corner
        </Link>

        <Link to="/aushadhi" className="sidebar-link">
          <Icons.Image /> Upload Prescription
        </Link>
      </nav>

      {/* USER INFO */}
      <div className="p-4 border-t">
        <Link to="/profile">
          <p className="font-bold text-slate-700">{userName}</p>
          <p className="text-xs text-teal-600">Plus Member</p>
        </Link>
      </div>

      {/* LOGOUT BUTTON */}
      <button
        onClick={handleLogout}
        className="flex items-center gap-2 m-4 px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700 transition"
      >
        <Icons.Logout /> Logout
      </button>
    </aside>
  );
};

export default UserSidebar;
</file>

<file path="src/context/AuthContext.jsx">
import { createContext, useContext, useEffect, useState } from "react";

const AuthContext = createContext();

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [role, setRole] = useState("guest"); // guest | user | pharmacist | admin

  // üîÑ Restore auth on refresh
  useEffect(() => {
    if (localStorage.getItem("adminToken")) {
      setRole("admin");
    } else if (localStorage.getItem("pharmacistToken")) {
      setRole("pharmacist");
    } else {
      const storedUser = JSON.parse(localStorage.getItem("user"));
      const token = localStorage.getItem("token");
      if (storedUser && token) {
        setUser({ ...storedUser, token });
        setRole("user");
      }
    }
  }, []);

  const loginUser = (userData, token) => {
    localStorage.setItem("user", JSON.stringify(userData));
    localStorage.setItem("token", token);
    setUser({ ...userData, token });
    setRole("user");
  };

  const loginPharmacist = (token) => {
    localStorage.setItem("pharmacistToken", token);
    setRole("pharmacist");
  };

  const loginAdmin = (token) => {
    localStorage.setItem("adminToken", token);
    setRole("admin");
  };

  const logout = () => {
    localStorage.clear();
    setUser(null);
    setRole("guest");
  };

  return (
    <AuthContext.Provider
      value={{
        user,
        role,
        loginUser,
        loginPharmacist,
        loginAdmin,
        logout,
      }}
    >
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => useContext(AuthContext);
</file>

<file path="src/hooks/useSocket.js">
import { useEffect, useRef } from "react";
import { io } from "socket.io-client";


export default function useSocket(userId) {
  const socketRef = useRef(null);

  useEffect(() => {
    if (!userId) return;

    // Use VITE_API_URL environment variable or fallback to localhost
    const SOCKET_URL = import.meta.env.VITE_BACKEND_URL || "http://localhost:5000";
    const socket = io(SOCKET_URL, { autoConnect: false });

    socketRef.current = socket;

    // Manually connect after initialization
    socket.connect();

    socket.on('connect', () => {
      socket.emit('identify', { userId });
      console.log(`Socket connected with id ${socket.id}`);
    });

    // Optional: handle reconnect attempts
    socket.io.on('reconnect_attempt', () => {
      console.log('Attempting to reconnect to socket server...');
    });

    return () => {
      if (socketRef.current) {
        socketRef.current.disconnect();
        socketRef.current = null;
      }
    };
  }, [userId]);

  return socketRef;
}
</file>

<file path="src/index.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

/* .nav-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.6rem 0.75rem;
  border-radius: 0.75rem;
  font-weight: 600;
  color: #374151;
  transition: all 0.2s ease;
}

.nav-item span {
  display: none;
}

.group:hover .nav-item span {
  display: inline;
}

.nav-item:hover {
  background-color: rgba(13, 148, 136, 0.2);
} */
.sidebar-link {
  @apply w-full flex items-center gap-3 px-3 py-2 rounded-lg text-slate-700 hover:bg-slate-100 transition;
}

.sidebar-link.active {
  @apply bg-slate-900 text-white;
}
html,
body {
  overflow-x: hidden;
}
</file>

<file path="src/layout/Layout.jsx">
import { Outlet } from "react-router-dom";
import Navbar from "../components/Navbar";

const Layout = () => {
  return (
    <div className="flex">
      {/* Sidebar */}
      <Navbar />

      {/* Page Content */}
      <main className="ml-16 hover:ml-64 transition-all duration-300 w-full p-4">
        <Outlet />
      </main>
    </div>
  );
};

export default Layout;
</file>

<file path="src/main.jsx">
import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App";
import "./index.css";
import { AuthProvider } from "./context/AuthContext";


ReactDOM.createRoot(document.getElementById("root")).render(
  <React.StrictMode>
    <AuthProvider>
      <App />
    </AuthProvider>
  </React.StrictMode>
);
</file>

<file path="src/screens/AdminDashboard.jsx">
import { useEffect, useState } from "react";
import axios from "axios";
import { Eye, EyeOff } from "lucide-react";

export default function AdminDashboard() {
  const [users, setUsers] = useState([]);
  const [requests, setRequests] = useState([]);
  const [pharmacists, setPharmacists] = useState([]);
  const [showAdminPassword, setShowAdminPassword] = useState(true);
  const [showPharmacistPassword, setShowPharmacistPassword] = useState(true);

  const [newAdmin, setNewAdmin] = useState({ email: "", password: "" });
  const [newPharmacist, setNewPharmacist] = useState({
    name: "",
    email: "",
    password: "",
  });

  useEffect(() => {
    fetchAll();
  }, []);

  const fetchAll = async () => {
    const token = localStorage.getItem("adminToken");
    if (!token) {
      window.location.href = "/admin/login";
      return;
    }

    const headers = { Authorization: `Bearer ${token}` };

    try {
      const [u, r, p] = await Promise.all([
        axios.get(`${import.meta.env.VITE_BACKEND_URL}/api/admin-panel/users`, {
          headers,
        }),
        axios.get(
          `${import.meta.env.VITE_BACKEND_URL}/api/admin-panel/requests`,
          { headers }
        ),
        axios.get(
          `${import.meta.env.VITE_BACKEND_URL}/api/admin-panel/pharmacists`,
          { headers }
        ),
      ]);

      setUsers(u.data);
      setRequests(r.data);
      setPharmacists(p.data);
    } catch (err) {
      console.error(err);
      localStorage.removeItem("adminToken");
      window.location.href = "/admin/login";
    }
  };

  // üîê Create Admin (NO TOKEN REQUIRED)
  const createAdmin = async (e) => {
    e.preventDefault();
    try {
      await axios.post(
        `${import.meta.env.VITE_BACKEND_URL}/api/admin/register`,
        {
          email: newAdmin.email,
          password: newAdmin.password,
        }
      );

      alert("Admin created");
      setNewAdmin({ email: "", password: "" });
    } catch (err) {
      console.error("Create admin error:", err.response?.data || err.message);
      alert(err.response?.data?.message || "Failed to create admin");
    }
  };

  // üíä Create Pharmacist
  const createPharmacist = async (e) => {
    e.preventDefault();
    const token = localStorage.getItem("adminToken");

    try {
      await axios.post(
        `${import.meta.env.VITE_BACKEND_URL}/api/admin-panel/pharmacist`,
        newPharmacist,
        {
          headers: { Authorization: `Bearer ${token}` },
        }
      );

      alert("Pharmacist created");
      setNewPharmacist({ name: "", email: "", password: "" });
      fetchAll();
    } catch (err) {
      alert(err.response?.data?.message || "Failed to create pharmacist");
    }
  };
  // ‚ùå Delete Pharmacist
  const deletePharmacist = async (id) => {
    const token = localStorage.getItem("adminToken");

    if (!window.confirm("Are you sure you want to delete this pharmacist?")) {
      return;
    }

    try {
      await axios.delete(
        `${import.meta.env.VITE_BACKEND_URL}/api/admin-panel/pharmacists/${id}`,
        {
          headers: { Authorization: `Bearer ${token}` },
        }
      );

      alert("Pharmacist deleted");
      fetchAll();
    } catch (err) {
      alert(err.response?.data?.message || "Failed to delete pharmacist");
    }
  };

  return (
    <div className="p-4 sm:p-6 lg:p-8 bg-[#0f172a] text-white min-h-screen">
      <h1 className="text-2xl text-white sm:text-3xl font-bold mb-6 sm:mb-8">
        Admin Dashboard
      </h1>

      {/* üìä Summary */}
      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-8 sm:mb-10 ">
        <StatCard title="Users" count={users.length} />
        <StatCard title="Blood Requests" count={requests.length} />
        <StatCard title="Pharmacists" count={pharmacists.length} />
      </div>

      {/* ‚ûï Create Section */}
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 mb-10 sm:mb-12">
        <FormCard title="Create Admin" onSubmit={createAdmin}>
          <Input
            placeholder="Email"
            value={newAdmin.email}
            onChange={(e) =>
              setNewAdmin({ ...newAdmin, email: e.target.value })
            }
          />

          <div className="relative">
            <Input
              placeholder="Password"
              value={newAdmin.password}
              type={showAdminPassword ? "password" : "text"}
              onChange={(e) =>
                setNewAdmin({ ...newAdmin, password: e.target.value })
              }
              className="pr-10"
            />
            <button
              type="button"
              onClick={() => setShowAdminPassword((p) => !p)}
              className="absolute right-3 top-1/2 -translate-y-1/2 text-white"
            >
              {showAdminPassword ? <EyeOff size={18} /> : <Eye size={18} />}
            </button>
          </div>
        </FormCard>

        <FormCard title="Create Pharmacist" onSubmit={createPharmacist}>
          <Input
            placeholder="Name"
            value={newPharmacist.name}
            onChange={(e) =>
              setNewPharmacist({ ...newPharmacist, name: e.target.value })
            }
          />

          <Input
            placeholder="Email"
            value={newPharmacist.email}
            onChange={(e) =>
              setNewPharmacist({ ...newPharmacist, email: e.target.value })
            }
          />

          <div className="relative">
            <Input
              placeholder="Password"
              type={showPharmacistPassword ? "password" : "text"}
              value={newPharmacist.password}
              onChange={(e) =>
                setNewPharmacist({ ...newPharmacist, password: e.target.value })
              }
              className="pr-10"
            />
            <button
              type="button"
              onClick={() => setShowPharmacistPassword((p) => !p)}
              className="absolute right-3 top-1/2 -translate-y-1/2 text-white"
            >
              {showPharmacistPassword ? <EyeOff size={18} /> : <Eye size={18} />}
            </button>
          </div>
        </FormCard>
      </div>

      {/* üìã Tables */}
      <ResponsiveTable
        title="Registered Users"
        headers={["Name", "Email", "Phone"]}
        tableRows={users.map((u) => (
          <tr key={u._id}>
            <td className="p-3">{u.name}</td>
            <td className="p-3">{u.email}</td>
            <td className="p-3">{u.phone || "‚Äî"}</td>
          </tr>
        ))}
        mobileCards={users.map((u) => (
          <div
            key={u._id}
            className="bg-[#1e293b] text-white rounded-lg p-4 shadow-sm"
          >
            <p className="font-semibold">{u.name}</p>
            <p className="text-sm text-gray-600 break-all">{u.email}</p>
            <p className="text-sm mt-1">üìû {u.phone || "‚Äî"}</p>
          </div>
        ))}
      />

      <ResponsiveTable
        title="Blood Requests"
        headers={["Email", "Blood Group", "Status"]}
        tableRows={requests.map((r) => (
          <tr key={r._id}>
            <td className="p-3">{r.requester || "‚Äî"}</td>
            <td className="p-3">{r.group}</td>
            <td className="p-3">{r.status}</td>
          </tr>
        ))}
        mobileCards={requests.map((r) => (
          <div
            key={r._id}
            className="bg-[#1e293b] text-white rounded-lg p-4 shadow-sm"
          >
            <p className="font-semibold">Email: {r.requester || "‚Äî"}</p>
            <p className="font-semibold">Blood Group: {r.group}</p>
            <p className="text-sm mt-1">Status: {r.status}</p>
          </div>
        ))}
      />

      <ResponsiveTable
        title="Pharmacists"
        headers={["Name", "Email", "Action"]}
        tableRows={pharmacists.map((p) => (
          <tr key={p._id}>
            <td className="p-3">{p.name}</td>
            <td className="p-3">{p.email}</td>
            <td className="p-3">
              <button
                onClick={() => deletePharmacist(p._id)}
                className="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition"
              >
                Delete
              </button>
            </td>
          </tr>
        ))}
        mobileCards={pharmacists.map((p) => (
          <div
            key={p._id}
            className="bg-[#1e293b] text-white rounded-lg p-4 shadow-sm"
          >
            <p className="font-semibold">{p.name}</p>
            <p className="text-sm text-gray-600 break-all">{p.email}</p>
            <button
              onClick={() => deletePharmacist(p._id)}
              className="mt-2 bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition"
            >
              Delete
            </button>
          </div>
        ))}
      />
    </div>
  );
}

/* ------------------ UI Components ------------------ */
const StatCard = ({ title, count }) => (
  <div className="bg-[#1e293b] text-white p-4 sm:p-6 rounded-xl shadow">
    <h3 className="text-gray-500 text-sm sm:text-base">{title}</h3>
    <p className="text-2xl sm:text-3xl font-bold">{count}</p>
  </div>
);

const FormCard = ({ title, children, onSubmit }) => (
  <form
    onSubmit={onSubmit}
    className="bg-[#1e293b] text-white p-4 sm:p-6 rounded-xl shadow space-y-4"
  >
    <h2 className="text-lg sm:text-xl font-semibold ">{title}</h2>
    {children}
    <button className="w-full sm:w-auto bg-blue-600 text-white px-5 py-2 rounded hover:bg-blue-700 transition">
      Create
    </button>
  </form>
);

const Input = (props) => (
  <input
    {...props}
    className="border bg-[#1e293b] text-white w-full p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
    required
  />
);

const ResponsiveTable = ({ title, headers, tableRows, mobileCards }) => (
  <div className="bg-[#1e293b] text-white rounded-xl shadow mb-8 sm:mb-10">
    <h2 className="text-lg sm:text-xl font-semibold p-4">{title}</h2>

    {/* Desktop Table */}
    <div className="hidden sm:block overflow-x-auto ">
      <table className="min-w-full border-t">
        <thead className="bg-[#1e293b] text-white ">
          <tr>
            {headers.map((h) => (
              <th key={h} className="text-left p-3">
                {h}
              </th>
            ))}
          </tr>
        </thead>
        <tbody className="divide-y">{tableRows}</tbody>
      </table>
    </div>

    {/* Mobile Cards */}
    <div className="sm:hidden space-y-3 p-4">{mobileCards}</div>
  </div>
);
</file>

<file path="src/screens/AdminLogin.jsx">
import { useState } from "react";
import axios from "axios";
import { useNavigate } from "react-router-dom";
import { useAuth } from "../context/AuthContext";
import { Eye, EyeOff } from "lucide-react";

export default function AdminLogin() {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [loading, setLoading] = useState(false);
  const [showPassword, setShowPassword] = useState(true);

  const navigate = useNavigate();
  const { loginAdmin } = useAuth();

  const handleLogin = async (e) => {
    e.preventDefault();
    setLoading(true);

    try {
      const res = await axios.post(
        `${import.meta.env.VITE_BACKEND_URL}/api/admin/login`,
        { email, password }
      );

      loginAdmin(res.data.token); // ‚úÖ React state updated

      navigate("/admin/dashboard", { replace: true });
    } catch {
      alert("Invalid credentials");
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="flex h-screen justify-center items-center bg-gray-100">
  <form
    onSubmit={handleLogin}
    className="bg-white p-8 rounded-2xl shadow-md w-96"
  >
    <h2 className="text-2xl font-bold mb-6 text-center">Admin Login</h2>

    <input
      type="email"
      className="border w-full p-2 mb-4 rounded"
      placeholder="Email"
      onChange={(e) => setEmail(e.target.value)}
      required
    />

    {/* ‚úÖ PASSWORD + EYE WRAPPER */}
    <div className="relative mb-4">
      <input
        type={showPassword ? "password" : "text"}
        className="w-full p-2 pr-10 border rounded"
        placeholder="Password"
        value={password}
        onChange={(e) => setPassword(e.target.value)}
        required
      />

      <button
        type="button"
        onClick={() => setShowPassword((p) => !p)}
        className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"
      >
        {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}
      </button>
    </div>

    <button
      type="submit"
      disabled={loading}
      className="bg-blue-500 text-white w-full py-2 rounded disabled:opacity-50"
    >
      {loading ? "Logging in..." : "Login"}
    </button>
  </form>
</div>

  );
}
</file>

<file path="src/screens/AI.jsx">
// src/screens/AIHealthAssist.jsx
import React, { useState } from "react";

const AIHealthAssist = () => {
  // Sample AI health assist data
  const assists = [
    { name: "Fever Diagnosis", category: "Symptom Checker", description: "Get AI-based suggestions for fever causes." },
    { name: "Diabetes Risk", category: "Health Risk", description: "AI analysis of diabetes risk based on symptoms." },
    { name: "Heart Health", category: "Cardiology", description: "AI insights for heart disease risk and prevention." },
    { name: "Skin Check", category: "Dermatology", description: "Upload symptoms to get AI skin health analysis." },
    { name: "Mental Wellness", category: "Psychology", description: "AI chatbot for stress, anxiety & depression support." },
    { name: "Diet Planner", category: "Nutrition", description: "Personalized AI diet recommendations." },
  ];

  const [searchTerm, setSearchTerm] = useState("");

  // Filter by name or category
  const filteredAssists = assists.filter(
    (assist) =>
      assist.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      assist.category.toLowerCase().includes(searchTerm.toLowerCase())
  );

  return (
    <div className="min-h-screen p-6 bg-gray-100 relative">
      <h1 className="text-4xl font-extrabold text-gray-900 mb-8 text-center">
        AI <span className="text-green-600">Health Assist</span>
      </h1>

      {/* Search Bar */}
      <div className="mb-10 max-w-lg mx-auto">
        <input
          type="text"
          placeholder="üîç Search by assist name or category..."
          className="w-full p-3 rounded-xl border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition"
          value={searchTerm}
          onChange={(e) => setSearchTerm(e.target.value)}
        />
      </div>

      {/* AI Assists Grid */}
      <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
        {filteredAssists.length > 0 ? (
          filteredAssists.map((assist, index) => (
            <div
              key={index}
              className="bg-white shadow-md rounded-xl p-6 hover:shadow-2xl hover:scale-105 transform transition duration-200 cursor-pointer"
            >
              <h2 className="text-xl font-bold text-green-700">{assist.name}</h2>
              <p className="text-sm text-gray-600 mt-1">Category: {assist.category}</p>
              <p className="text-sm text-gray-600 mt-2">{assist.description}</p>
              <button className="mt-4 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition">
                Try Now
              </button>
            </div>
          ))
        ) : (
          <p className="text-gray-500 text-center text-lg col-span-full">
            ‚ùå No AI assists found.
          </p>
        )}
      </div>
    </div>
  );
};

export default AIHealthAssist;
</file>

<file path="src/screens/Aushadhi.jsx">
import React, { useState, useEffect } from "react";
import axios from "axios";
import { useAuth } from "../context/AuthContext";
import useSocket from "../hooks/useSocket";

const Aushadhi = () => {
  const { user } = useAuth();

  const [prescription, setPrescription] = useState(null);
  const [uploadStatus, setUploadStatus] = useState("");
  const [searchTerm, setSearchTerm] = useState("");
  const [prescriptions, setPrescriptions] = useState([]);
  const [selectedMedicines, setSelectedMedicines] = useState([]);
  const [isUploading, setIsUploading] = useState(false);

  const socket = useSocket(user?.email);

  /* ---------------- FETCH PRESCRIPTIONS ---------------- */
  useEffect(() => {
    if (!user?.token) return;

    axios
      .get(`${import.meta.env.VITE_BACKEND_URL}/api/prescriptions`, {
        headers: { Authorization: `Bearer ${user.token}` },
      })
      .then((res) => setPrescriptions(res.data))
      .catch(console.error);
  }, [user]);

  /* ---------------- SOCKET LISTENER ---------------- */
  useEffect(() => {
    if (!socket?.current) return;

    const s = socket.current;

    s.on("prescriptionConfirmed", (data) => {
      alert(data.message);
      setPrescriptions((prev) =>
        prev.map((p) =>
          p._id === data.prescriptionId
            ? {
                ...p,
                status: "confirmed",
                confirmation: {
                  allPresent: data.allPresent,
                  medicines: data.medicines || [],
                },
              }
            : p
        )
      );
    });

    return () => s.off("prescriptionConfirmed");
  }, [socket]);

  /* ---------------- UPLOAD ---------------- */
  const handleFileChange = (e) => {
    setPrescription(e.target.files[0]);
    setUploadStatus("");
  };

  const handleUpload = async () => {
    if (!prescription || !user) return;

    const formData = new FormData();
    formData.append("file", prescription);
    formData.append("userName", user.name);
    formData.append("userEmail", user.email);

    try {
      setIsUploading(true);
      setUploadStatus("Uploading...");

      await axios.post(
        `${import.meta.env.VITE_BACKEND_URL}/api/prescriptions`,
        formData,
        { headers: { Authorization: `Bearer ${user.token}` } }
      );

      setUploadStatus("Uploaded successfully!");
      setPrescription(null);
    } catch {
      setUploadStatus("Upload failed.");
    } finally {
      setIsUploading(false);
    }
  };

  /* ---------------- MEDICINES ---------------- */
  const medicines = [
    {
      name: "Paracetamol",
      dosage: "500mg",
      steps: "Take 1 tablet every 6 hours",
    },
    { name: "Amoxicillin", dosage: "250mg", steps: "Every 8 hours for 5 days" },
    { name: "Vitamin C", dosage: "500mg", steps: "Once daily" },
    { name: "Vitamin D", dosage: "400mg", steps: "If pain persists" },
    { name: "Combiflame", dosage: "400mg", steps: "If pain persists" },
    { name: "Ciplox Eye Drops", dosage: "2 drops", steps: "Twice daily" },
  ];

  const filteredMedicines = medicines.filter((m) =>
    m.name.toLowerCase().includes(searchTerm.toLowerCase())
  );

  const toggleSelectMedicine = (name) => {
    setSelectedMedicines((prev) =>
      prev.includes(name) ? prev.filter((m) => m !== name) : [...prev, name]
    );
  };

  const handleManualSubmit = async () => {
    if (!selectedMedicines.length) return alert("Select medicines");

    await axios.post(
      `${import.meta.env.VITE_BACKEND_URL}/api/prescriptions/manual`,
      {
        medicines: selectedMedicines,
        userEmail: user.email,
        userName: user.name,
      },
      { headers: { Authorization: `Bearer ${user.token}` } }
    );

    alert("‚úÖ Medicine request submitted");
    setSelectedMedicines([]);
  };

  return (
    <main className="min-h-screen p-6 bg-gray-100 relative">
      {/* -------- HEADER -------- */}
      <div className="bg-gradient-to-r from-teal-500 to-emerald-600 rounded-2xl p-6 sm:p-8 text-white">
        <h1 className="text-xl sm:text-2xl md:text-3xl font-bold">
          Svasthya <span className="text-teal-100">Aushadhi</span>
        </h1>
        <p className="text-teal-100 mt-1">
          Upload prescriptions or request medicines manually
        </p>
      </div>

      {/* -------- UPLOAD -------- */}
      <div className="bg-white p-6 rounded-xl shadow-sm flex flex-col sm:flex-row gap-4 justify-between items-center mt-2">
        <label className="cursor-pointer border rounded px-4 py-2 bg-slate-50 hover:bg-slate-100">
          {prescription ? prescription.name : "Select Prescription"}
          <input type="file" className="hidden" onChange={handleFileChange} />
        </label>

        <button
          onClick={handleUpload}
          disabled={!prescription || isUploading}
          className="bg-teal-600 text-white px-6 py-2 rounded-lg disabled:opacity-50"
        >
          {isUploading ? "Uploading..." : "Upload"}
        </button>
      </div>

      {uploadStatus && (
        <p className="text-center font-semibold text-teal-600">
          {uploadStatus}
        </p>
      )}

      {/* -------- SEARCH -------- */}
      <input
        className="w-full max-w-md mx-auto block p-3 m-3 rounded-xl border shadow-sm"
        placeholder="Search medicine..."
        value={searchTerm}
        onChange={(e) => setSearchTerm(e.target.value)}
      />

      {/* -------- MEDICINES GRID -------- */}
      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        {filteredMedicines.map((m, i) => (
          <div
            key={i}
            onClick={() => toggleSelectMedicine(m.name)}
            className={`bg-white p-6 rounded-xl shadow-sm cursor-pointer transition hover:shadow-lg ${
              selectedMedicines.includes(m.name) ? "ring-4 ring-teal-500" : ""
            }`}
          >
            <h3 className="font-bold text-teal-700">{m.name}</h3>
            <p className="text-sm text-gray-500">{m.dosage}</p>
            <p className="text-sm mt-2">{m.steps}</p>
          </div>
        ))}
      </div>

      {/* -------- SUBMIT -------- */}
      {selectedMedicines.length > 0 && (
        <div className="text-center">
          <p className="mb-2 text-gray-700">
            Selected: <strong>{selectedMedicines.join(", ")}</strong>
          </p>
          <button
            onClick={handleManualSubmit}
            className="bg-blue-600 text-white px-6 py-2 rounded-lg"
          >
            Submit Selected Medicines
          </button>
        </div>
      )}

      {/* -------- CONFIRMATION SECTION -------- */}
      <div className="mt-10 max-w-3xl mx-auto">
        <h2 className="text-xl font-semibold mb-3">
          Prescription Confirmations
        </h2>

        {prescriptions.length === 0 && (
          <p className="text-gray-600">No prescriptions found.</p>
        )}

        {prescriptions.map((p) =>
          p.confirmation ? (
            <div
              key={p._id}
              className="bg-green-100 p-4 rounded mb-4 shadow-sm"
            >
              <p>
                <strong>Status:</strong> Confirmed
              </p>

              {p.confirmation.allPresent ? (
                <p>
                  <strong>All Medicines Present:</strong> Yes
                </p>
              ) : (
                <>
                  <p>
                    <strong>All Medicines Present:</strong> No
                  </p>

                  {p.confirmation.medicines &&
                    p.confirmation.medicines.length > 0 && (
                      <ul className="list-disc list-inside ml-4 mt-1">
                        {p.confirmation.medicines.map((m, idx) => (
                          <li key={idx}>{m}</li>
                        ))}
                      </ul>
                    )}
                </>
              )}
            </div>
          ) : null
        )}
      </div>
    </main>
  );
};

export default Aushadhi;
</file>

<file path="src/screens/Auth.jsx">
import React, { useState } from "react";
import api from "../services/api";
import { useAuth } from "../context/AuthContext";

const Auth = () => {
  const [mode, setMode] = useState("login"); // 'login' or 'register'
  const [form, setForm] = useState({
    email: "",
    phone: "",
    password: "",
    name: "",
    bloodGroup: "",
    age: "",
  });
  const { login } = useAuth();

  const submit = async () => {
    try {
      // validation
      if ((!form.email && !form.phone) || !form.password) {
        alert("Please provide either Email or Phone and Password!");
        return;
      }

      if (
        mode === "register" &&
        (!form.name || !form.bloodGroup || !form.age)
      ) {
        alert("Please fill all required registration fields!");
        return;
      }

      // ‚úÖ Payload banate waqt sirf filled fields bhejo
      let payload = { password: form.password };

      if (form.email) payload.email = form.email;
      if (form.phone) payload.phone = form.phone;

      if (mode === "register") {
        payload.name = form.name;
        payload.bloodGroup = form.bloodGroup;
        payload.age = form.age;
      }

      const { data } = await api.post(
        mode === "login" ? "/auth/login" : "/auth/register",
        payload
      );

      login(data.user, data.token);

      if (mode === "register") {
        alert("Registration successful! You are now logged in.");
      }
    } catch (err) {
      alert(err.response?.data?.error || "Error");
    }
  };

  return (
    <div className="max-w-md mx-auto p-6 bg-white rounded shadow">
      <h2 className="text-2xl font-bold mb-4 text-center">
        {mode === "login" ? "Login" : "Register"}
      </h2>

      {/* Email & Phone (optional, but at least one required) */}
        <input
        placeholder="Email (optional if using phone)"
        onChange={e => setForm({ ...form, email: e.target.value })}
        className="w-full p-2 border mb-2"
      />
      <input
        placeholder="Phone (optional if using email)"
        onChange={e => setForm({ ...form, phone: e.target.value })}
        className="w-full p-2 border mb-2"
/>

      {/* Password */}
      <input
        placeholder="Password"
        type="password"
        value={form.password}
        onChange={(e) => setForm({ ...form, password: e.target.value })}
        className="w-full p-2 border mb-2 rounded"
      />

      {/* Extra fields for registration */}
      {mode === "register" && (
        <>
          <input
            placeholder="Full Name"
            value={form.name}
            onChange={(e) => setForm({ ...form, name: e.target.value })}
            className="w-full p-2 border mb-2 rounded"
          />
          <input
            placeholder="Blood Group"
            value={form.bloodGroup}
            onChange={(e) =>
              setForm({ ...form, bloodGroup: e.target.value })
            }
            className="w-full p-2 border mb-2 rounded"
          />
          <input
            placeholder="Age"
            type="number"
            value={form.age}
            onChange={(e) => setForm({ ...form, age: e.target.value })}
            className="w-full p-2 border mb-2 rounded"
          />
        </>
      )}

      {/* Submit button */}
      <button
        onClick={submit}
        className="w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition"
      >
        {mode === "login" ? "Login" : "Register"}
      </button>

      {/* Switch mode */}
      <div className="mt-3 text-center">
        <button
          onClick={() =>
            setMode(mode === "login" ? "register" : "login")
          }
          className="text-sm text-blue-600 underline"
        >
          {mode === "login"
            ? "Don't have an account? Register"
            : "Already have an account? Login"}
        </button>
      </div>
    </div>
  );
};

export default Auth;
</file>

<file path="src/screens/Cart.jsx">
import React from "react";

const Cart = ({ onBack, onCheckout }) => {
  return (
    <div className="absolute inset-0 bg-gray-50 overflow-y-auto">
      <div className="p-4 bg-gray-800 text-white flex justify-between items-center sticky top-0">
        <button onClick={onBack}>‚Üê</button>
        <h1 className="font-bold">My Cart</h1>
        <div className="w-10" />
      </div>
      <div className="p-4">
        <div className="bg-white p-3 rounded-lg">Dolo 650mg - ‚Çπ30.90</div>
        <div className="bg-white p-3 rounded-lg mt-2">Vicks Vaporub - ‚Çπ140</div>
        <button
          onClick={onCheckout}
          className="mt-6 w-full bg-teal-600 text-white py-3 rounded-lg"
        >
          Proceed to Checkout
        </button>
      </div>
    </div>
  );
};

export default Cart;
</file>

<file path="src/screens/Checkout.jsx">
import React from "react";

const Checkout = ({ onBack, onSuccess }) => {
  return (
    <div className="absolute inset-0 bg-gray-50 overflow-y-auto">
      <div className="p-4 bg-gray-800 text-white flex justify-between items-center sticky top-0">
        <button onClick={onBack}>‚Üê</button>
        <h1 className="font-bold">Checkout</h1>
        <div className="w-10" />
      </div>

      <div className="p-4">
        <div className="bg-white p-4 rounded-lg shadow mb-4">
          <h2 className="font-semibold text-gray-700">Shipping Address</h2>
          <p className="text-sm text-gray-600">123, MG Road, Bangalore</p>
        </div>

        <div className="bg-white p-4 rounded-lg shadow mb-4">
          <h2 className="font-semibold text-gray-700">Payment Method</h2>
          <p className="text-sm text-gray-600">UPI (PhonePe)</p>
        </div>

        <div className="bg-white p-4 rounded-lg shadow">
          <h2 className="font-semibold text-gray-700">Order Summary</h2>
          <p className="text-sm text-gray-600">2 items</p>
          <p className="font-bold mt-2">‚Çπ170.90</p>
        </div>

        <button
          onClick={onSuccess}
          className="mt-6 w-full bg-teal-600 text-white py-3 rounded-lg hover:bg-teal-700 transition"
        >
          Place Order
        </button>
      </div>
    </div>
  );
};

export default Checkout;
</file>

<file path="src/screens/Dashboard.jsx">
import React from "react";
import {
  Stethoscope,
  HeartPulse,
  ShieldCheck,
  UserCheck,
  HeartHandshake,
  Droplet,
  UserPlus,
  Activity,
  Heart,
  Mail,
  Phone,
  MapPin,
} from "lucide-react";

/* ================= CONTENT ================= */

const content = {
  hero: {
    badge: "Elevating Patient Care Through Clinical Expertise",
    title: "Expert PharmD Care for Superior Patient Outcomes",
    description:
      "Experience the difference of a healthcare platform built on PharmD principles. We bridge the gap between diagnosis and recovery with precise medication therapy management and dedicated patient advocacy.",
    ctaPrimary: <a href="/login">Consult a PharmD</a>,
    ctaSecondary: "Our Care Model",
    image: "https://images.unsplash.com/photo-1631815589968-fdb09a223b1e",
  },
  features: {
    title: "Advanced Clinical Care for Every Patient",
    description:
      "Our PharmD-led approach redefines healthcare delivery, prioritizing safety, efficacy, and compassionate support.",
    items: [
      {
        title: "Patient-First Medication Review",
        description:
          "Every prescription is clinically reviewed to prevent interactions.",
      },
      {
        title: "Therapeutic Outcome Monitoring",
        description:
          "Continuous tracking and optimization of therapy outcomes.",
      },
      {
        title: "Collaborative Care Ecosystem",
        description: "Pharmacists, doctors, and caregivers working together.",
      },
      {
        title: "Donor Assurance Program",
        description: "Guaranteed priority access to blood units for donors.",
      },
    ],
  },
  about: {
    title: "Founded on Clinical Excellence",
    description1:
      "Svasthya Hubis a PharmD-led initiative focused on patient-first healthcare.",
    description2:
      "We ensure every medication decision is evidence-based and personalized.",
    image: "https://images.unsplash.com/photo-1576091160399-112ba8d25d1d",
    items: [
      { title: "Patient Advocacy", description: "Your health comes first." },
      {
        title: "Optimized Outcomes",
        description: "Better recovery, fewer risks.",
      },
      {
        title: "Life-Saving Assurance",
        description: "Care when it matters most.",
      },
    ],
  },
  footer: {
    brandName: "Svasthya Hub",
    description: "India‚Äôs pioneering PharmD-led clinical pharmacy network.",
    quickLinks: [
      "Privacy Policy",
      "FAQs",
      <a href="/pharmacist-login">Partner Login</a>,
      "Terms of Service",
    ],
    services: [
      "Clinical Pharmacy",
      "Medication Therapy",
      "Health Consultations",
      "Partner Programs",
    ],
    copyright: `¬© ${new Date().getFullYear()} Svasthya Hub. All rights reserved.`,
  },
};

/* ================= PAGE ================= */

export default function Dashboard() {
  return (
    <div className="min-h-screen bg-white">
      {/* <Header/> */}
      <Hero />
      <Features />
      <About />
      <PatientVision />
      <Trust />
      <Footer />
    </div>
  );
}

/* ================= HEADER ================= */

// const Header = () => (
//   <header className="sticky top-0 z-50 bg-white border-b">
//     <div className="max-w-7xl mx-auto h-20 px-6 flex items-center justify-between">

//       {/* Logo */}
//       <div className="flex items-center gap-3">
//         <div className="w-11 h-11 bg-[#0369a1] rounded-xl flex items-center justify-center">
//           <Stethoscope className="text-white" />
//         </div>
//         <span className="text-xl font-bold text-[#0369a1]">
//           Svasthya Hub
//         </span>
//       </div>

//       {/* Navigation */}
//       <nav className="hidden md:flex items-center gap-8">
//         <a
//           href="#features"
//           className="text-gray-600 hover:text-[#0369a1] transition-colors font-medium"
//         >
//           Features
//         </a>
//         <a
//           href="#about"
//           className="text-gray-600 hover:text-[#0369a1] transition-colors font-medium"
//         >
//           About Us
//         </a>
//         <a
//           href="#partners"
//           className="text-gray-600 hover:text-[#0369a1] transition-colors font-medium"
//         >
//           Partners
//         </a>
//         <a
//           href="#contact"
//           className="text-gray-600 hover:text-[#0369a1] transition-colors font-medium"
//         >
//           Contact
//         </a>
//       </nav>

//       {/* CTA */}
//       <div className="hidden md:block">
//         <button className="bg-[#0369a1] text-white px-6 py-2 rounded-md font-medium hover:bg-[#035f8f] transition">
//           Consult a PharmD
//         </button>
//       </div>

//     </div>
//   </header>
// );

/* ================= HERO ================= */

const Hero = () => (
  <section className="bg-gradient-to-br from-indigo-50 to-blue-50 py-28">
    <div className="max-w-7xl mx-auto grid lg:grid-cols-2 gap-12 px-6 items-center">
      <div>
        <span className="inline-flex gap-2 bg-indigo-100 px-4 py-2 rounded-full text-sm font-semibold text-[#0369a1]">
          <HeartPulse className="w-4 h-4" />
          {content.hero.badge}
        </span>

        <h1 className="mt-6 text-5xl font-bold text-gray-900">
          {content.hero.title}
        </h1>

        <p className="mt-6 text-lg text-gray-600">{content.hero.description}</p>

        <div className="mt-8 flex gap-4">
          <button className="px-8 py-3 bg-[#0369a1] text-white rounded-lg font-semibold">
            {content.hero.ctaPrimary}
          </button>
          <button className="px-8 py-3 border border-[#0369a1] text-[#0369a1] rounded-lg font-semibold">
            {content.hero.ctaSecondary}
          </button>
        </div>
      </div>

      <img src={content.hero.image} className="rounded-2xl shadow-xl" />
    </div>
  </section>
);

/* ================= FEATURES ================= */

const FEATURE_ICONS = [UserCheck, ShieldCheck, HeartHandshake, Droplet];

const Features = () => (
  <section className="py-24 bg-white">
    <div className="max-w-7xl mx-auto px-6">
      <h2 className="text-4xl font-bold text-center">
        {content.features.title}
      </h2>
      <p className="mt-4 text-gray-600 text-center max-w-2xl mx-auto">
        {content.features.description}
      </p>

      <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-8 mt-16">
        {content.features.items.map((item, i) => {
          const Icon = FEATURE_ICONS[i];
          return (
            <div
              key={i}
              className="p-6 rounded-2xl border shadow hover:shadow-xl"
            >
              <Icon className="w-7 h-7 text-[#0369a1]" />
              <h3 className="mt-4 text-xl font-semibold">{item.title}</h3>
              <p className="mt-2 text-gray-600">{item.description}</p>
            </div>
          );
        })}
      </div>
    </div>
  </section>
);

/* ================= ABOUT ================= */

const ABOUT_ICONS = [UserPlus, Activity, Heart];

const About = () => (
  <section className="py-24 bg-gradient-to-br from-indigo-50 to-blue-50">
    <div className="max-w-7xl mx-auto grid lg:grid-cols-2 gap-16 px-6">
      <img src={content.about.image} className="rounded-2xl shadow-xl" />

      <div>
        <h2 className="text-4xl font-bold">{content.about.title}</h2>
        <p className="mt-4 text-gray-600">{content.about.description1}</p>
        <p className="mt-4 text-gray-600">{content.about.description2}</p>

        <div className="mt-8 space-y-4">
          {content.about.items.map((item, i) => {
            const Icon = ABOUT_ICONS[i];
            return (
              <div key={i} className="flex gap-4">
                <Icon className="text-[#0369a1]" />
                <div>
                  <h4 className="font-semibold">{item.title}</h4>
                  <p className="text-gray-600">{item.description}</p>
                </div>
              </div>
            );
          })}
        </div>
      </div>
    </div>
  </section>
);

/* ================= Patient Visions================= */
const PatientVision = () => (
  <section className="w-full max-w-4xl mx-auto mt-10">
    <div className="relative overflow-hidden rounded-3xl bg-white border border-slate-200 shadow-sm hover:shadow-lg transition">
      {/* Subtle Accent */}
      <div className="absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-blue-500 via-sky-400 to-teal-400" />

      <div className="p-8 sm:p-10">
        <h2 className="text-xl font-extrabold text-slate-900 mb-4">
          <u>Founder's Vision</u>
        </h2>
        {/* Heading */}
        <h2 className="text-2xl sm:text-3xl  text-slate-900 mb-4">
          World-Class Safety in Every Neighborhood
        </h2>

        {/* Divider */}
        <div className="w-16 h-1 bg-blue-600 rounded-full mb-6" />

        {/* Content */}
        <p className="text-slate-600 leading-relaxed text-base sm:text-lg">
          We are on a mission to ensure you never have to second-guess your
          healthcare.
          <span className="font-semibold text-slate-800"> SvasthyaHub</span> is
          bringing hospital-grade safety checks to your local pharmacy‚Äîso every
          prescription is verified, every interaction is checked, and every
          patient is protected.
        </p>

        <p className="text-slate-600 leading-relaxed text-base sm:text-lg mt-4">
          We promise
          <span className="font-semibold text-blue-600"> Verified Quality</span>
          ,
          <span className="font-semibold text-green-600"> Expert Guidance</span>
          , and
          <span className="font-semibold text-teal-600"> Fair Prices</span> for
          every family in Bharat. Because your health deserves nothing less.
        </p>
        <h2 className="font-semibold  text-slate-900">
          <u>Dr. Ankit Rana</u>
        </h2>
        <h2 className="font-semibold text-slate-900">
          <u>Doctor of Pharmacy</u>
        </h2>
      </div>
    </div>
  </section>
);

/* ================= PARTNERS / TRUST ================= */

const Trust = () => (
  <section className="py-24 bg-white">
    <div className="max-w-7xl mx-auto px-6 text-center">
      <h2 className="text-5xl font-bold text-gray-900">
        Trusted by Leaders in Healthcare
      </h2>

      <p className="mt-4 text-gray-600 max-w-2xl mx-auto">
        Our commitment to patient safety and clinical excellence is recognized
        by premier institutions and regulatory bodies.
      </p>

      <div className="grid md:grid-cols-3 gap-8 mt-16">
        <div className="p-6 border rounded-2xl shadow hover:shadow-xl transition  bg-gradient-to-br from-indigo-50 to-blue-50">
          <h4 className="text-2xl font-semibold">NIMS University</h4>
          <p className="mt-2 text-gray-600">Clinical Research & Education</p>
        </div>

        <div className="p-6 border rounded-2xl shadow hover:shadow-xl transition bg-gradient-to-br from-indigo-50 to-blue-50">
          <h4 className="text-2xl font-semibold">Startup India</h4>
          <p className="mt-2 text-gray-600">Recognized Healthcare Innovation</p>
        </div>

        <div className="p-6 border rounded-2xl shadow hover:shadow-xl transition bg-gradient-to-br from-indigo-50 to-blue-50">
          <h4 className="text-2xl font-semibold">WHO-GMP Standard</h4>
          <p className="mt-2 text-gray-600">Ensuring Therapeutic Quality</p>
        </div>
      </div>

      {/* CTA BANNER */}
      <div className="mt-20 bg-gradient-to-r from-[#0369a1] to-indigo-600 rounded-2xl p-12 text-white">
        <h3 className="text-3xl font-bold">
          Join Our Patient-Centric Care Network
        </h3>
        <p className="mt-4 max-w-2xl mx-auto opacity-90">
          Whether you are a patient seeking better outcomes or a healthcare
          professional dedicated to clinical excellence, Svasthya hub is your
          partner in health.
        </p>

        <div className="mt-8 flex justify-center gap-4">
          <button className="bg-white text-[#0369a1] px-8 py-3 rounded-lg font-semibold">
            <a href="/login">Find a Specialist</a>
          </button>
          <button className="border border-white px-8 py-3 rounded-lg font-semibold">
            For Healthcare Providers
          </button>
        </div>
      </div>
    </div>
  </section>
);

/* ================= FOOTER (FIXED) ================= */

const Footer = () => (
  <footer className="bg-gray-900 text-white pt-16 pb-8">
    <div className="max-w-7xl mx-auto px-6 grid md:grid-cols-4 gap-12">
      {/* BRAND */}
      <div>
        <h3 className="text-xl font-bold">{content.footer.brandName}</h3>
        <p className="mt-4 text-gray-400">{content.footer.description}</p>
      </div>

      {/* QUICK LINKS */}
      <div>
        <h4 className="font-semibold mb-4">Quick Links</h4>
        <ul className="space-y-2 text-gray-400">
          {content.footer.quickLinks.map((link, i) => (
            <li key={i} className="hover:text-white cursor-pointer">
              {link}
            </li>
          ))}
        </ul>
      </div>

      {/* SERVICES */}
      <div>
        <h4 className="font-semibold mb-4">Services</h4>
        <ul className="space-y-2 text-gray-400">
          {content.footer.services.map((service, i) => (
            <li key={i} className="hover:text-white cursor-pointer">
              {service}
            </li>
          ))}
        </ul>
      </div>

      {/* CONTACT */}
      <div className="space-y-3 text-gray-400">
        <div className="flex gap-2">
          <Mail />{" "}
          <a href="mailto:hudsvasthya@gmail.com">hubsvasthya@gmail.com</a>
        </div>
        <div className="flex gap-2">
          <Phone /> <a href="tel:+91 9523443854">+91 9523443854</a>
        </div>
        <div className="flex gap-2">
          <MapPin />
          Jaipur, Rajasthan, India
        </div>
      </div>
    </div>

    <p className="mt-12 text-center text-gray-500">
      {content.footer.copyright}
    </p>
  </footer>
);
</file>

<file path="src/screens/Doctor.jsx">
// src/screens/Doctor.jsx
import React, { useState } from "react";

const Doctor = () => {
  // Sample doctors data
  const doctors = [
    { name: "Dr. Ramesh Kumar", specialization: "Cardiologist", experience: "10 years" },
    { name: "Dr. Priya Sharma", specialization: "Dermatologist", experience: "7 years" },
    { name: "Dr. Anil Verma", specialization: "Pediatrician", experience: "12 years" },
    { name: "Dr. Kavita Singh", specialization: "Gynecologist", experience: "9 years" },
    { name: "Dr. Arjun Mehta", specialization: "Orthopedic", experience: "8 years" },
    { name: "Dr. Neha Gupta", specialization: "Neurologist", experience: "6 years" },
  ];

  const [searchTerm, setSearchTerm] = useState("");

  // Filter by name or specialization
  const filteredDoctors = doctors.filter(
    (doctor) =>
      doctor.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      doctor.specialization.toLowerCase().includes(searchTerm.toLowerCase())
  );

  return (
    <div className="min-h-screen p-6 bg-gray-100 relative">
      <h1 className="text-4xl font-extrabold text-gray-900 mb-8 text-center">
        Find Your <span className="text-indigo-600">Doctor</span>
      </h1>

      {/* Search Bar */}
      <div className="mb-10 max-w-lg mx-auto">
        <input
          type="text"
          placeholder="üîç Search by name or specialization..."
          className="w-full p-3 rounded-xl border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
          value={searchTerm}
          onChange={(e) => setSearchTerm(e.target.value)}
        />
      </div>

      {/* Doctors Grid */}
      <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
        {filteredDoctors.length > 0 ? (
          filteredDoctors.map((doctor, index) => (
            <div
              key={index}
              className="bg-white shadow-md rounded-xl p-6 hover:shadow-2xl hover:scale-105 transform transition duration-200 cursor-pointer"
            >
              <h2 className="text-xl font-bold text-indigo-700">{doctor.name}</h2>
              <p className="text-sm text-gray-600 mt-1">Specialization: {doctor.specialization}</p>
              <p className="text-sm text-gray-600 mt-1">Experience: {doctor.experience}</p>
            </div>
          ))
        ) : (
          <p className="text-gray-500 text-center text-lg col-span-full">
            ‚ùå No doctors found.
          </p>
        )}
      </div>
    </div>
  );
};

export default Doctor;
</file>

<file path="src/screens/Lab.jsx">
// src/screens/Labtest.jsx
import React, { useState } from "react";

const Labtest = () => {
  // Sample lab tests data
  const labTests = [
    { name: "Blood Sugar Test", category: "Pathology", price: "‚Çπ300" },
    { name: "Lipid Profile", category: "Biochemistry", price: "‚Çπ800" },
    { name: "Complete Blood Count (CBC)", category: "Hematology", price: "‚Çπ500" },
    { name: "Thyroid Profile", category: "Endocrinology", price: "‚Çπ700" },
    { name: "X-Ray Chest", category: "Radiology", price: "‚Çπ1000" },
    { name: "MRI Brain", category: "Radiology", price: "‚Çπ5000" },
  ];

  const [searchTerm, setSearchTerm] = useState("");

  // Filter by name or category
  const filteredTests = labTests.filter(
    (test) =>
      test.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      test.category.toLowerCase().includes(searchTerm.toLowerCase())
  );

  return (
    <div className="min-h-screen bg-gradient-to-br from-pink-50 to-gray-50 p-6">
      <h1 className="text-4xl font-extrabold text-gray-900 mb-8 text-center">
        Book Your <span className="text-pink-600">Lab Test</span>
      </h1>

      {/* Search Bar */}
      <div className="mb-10 max-w-lg mx-auto">
        <input
          type="text"
          placeholder="üîç Search by test name or category..."
          className="w-full p-3 rounded-xl border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition"
          value={searchTerm}
          onChange={(e) => setSearchTerm(e.target.value)}
        />
      </div>

      {/* Lab Tests Grid */}
      <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
        {filteredTests.length > 0 ? (
          filteredTests.map((test, index) => (
            <div
              key={index}
              className="bg-white shadow-md rounded-xl p-6 hover:shadow-2xl hover:scale-105 transform transition duration-200 cursor-pointer"
            >
              <h2 className="text-xl font-bold text-pink-700">{test.name}</h2>
              <p className="text-sm text-gray-600 mt-1">Category: {test.category}</p>
              <p className="text-sm text-gray-600 mt-1">Price: {test.price}</p>
            </div>
          ))
        ) : (
          <p className="text-gray-500 text-center text-lg col-span-full">
            ‚ùå No lab tests found.
          </p>
        )}
      </div>
    </div>
  );
};

export default Labtest;
</file>

<file path="src/screens/Login.jsx">
import React, { useState, useEffect } from "react";
import axios from "axios";
import { useNavigate } from "react-router-dom";
import logo from "../assets/nlogo.jpg";
import Shivang from "../assets/Shivang.jpeg";
import Sachin from "../assets/Sachin.jpeg";
import { useAuth } from "../context/AuthContext";
import { Eye, EyeOff } from "lucide-react";
import { motion, AnimatePresence } from "framer-motion";

const Login = () => {
  const { loginUser } = useAuth(); // ‚úÖ NEW CONTEXT METHOD
  const navigate = useNavigate();

  const [form, setForm] = useState({
    name: "",
    email: "",
    phone: "",
    password: "",
    bloodGroup: "",
    age: "",
  });

  const [isLogin, setIsLogin] = useState(true);
  const [selectedRole, setSelectedRole] = useState("user");
  const [showPassword, setShowPassword] = useState(true); // üëÅÔ∏è FIXED
  const [loading, setLoading] = useState(false);
  const [index, setIndex] = useState(0);

  useEffect(() => {
    const timer = setInterval(() => {
      setIndex((prev) => (prev + 1) % doctors.length);
    }, 3500);

    return () => clearInterval(timer);
  }, []);

  const handleChange = (e) => {
    setForm({ ...form, [e.target.name]: e.target.value });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);

    if (!form.password || (!form.email && !form.phone)) {
      alert("Please provide email/phone and password");
      return;
    }

    if (!isLogin && (!form.name || !form.bloodGroup || !form.age)) {
      alert("Please fill all required fields");
      return;
    }

    const payload = isLogin
      ? {
          email: form.email || null,
          phone: form.phone || null,
          password: form.password,
        }
      : {
          name: form.name,
          email: form.email || null,
          phone: form.phone || null,
          password: form.password,
          bloodGroup: form.bloodGroup,
          age: form.age,
        };

    const url = isLogin
      ? `${import.meta.env.VITE_BACKEND_URL}/api/auth/login`
      : `${import.meta.env.VITE_BACKEND_URL}/api/auth/register`;

    try {
      const res = await axios.post(url, payload);

      if (isLogin) {
        // ‚úÖ CORRECT METHOD
        loginUser(res.data.user, res.data.token);

        // ‚úÖ CORRECT REDIRECT
        navigate("/userdashboard", { replace: true });
      } else {
        alert("Registration successful! Please log in.");
        setIsLogin(true);
      }
    } catch (err) {
      console.error("Axios error:", err);
      alert(err.response?.data?.error || "Login/Register failed");
    } finally {
      setLoading(false);
    }
  };

  const doctors = [
    {
      name: "Dr. Shivang Mishra",
      title: "Doctor of Pharmacy (Pharm.D)",
      role: "Healthcare Consultant",
      image: Shivang,
    },
    {
      name: "Dr. Sachin Kumar",
      title: "Doctor of Pharmacy (Pharm.D)",
      role: "Healthcare Consultant",
      image: Sachin,
    },
    {
      name: "Dr. Anurag Singh",
      title: "Doctor of Pharmacy (Pharm.D)",
      role: "Healthcare Consultant",
      image: "/doctors/anurag.jpg",
    },
  ];

  return (
    <div className="bg-slate-50 text-slate-900 font-sans">
      {/* HERO */}
      <header
        className="text-white py-20 px-6"
        style={{
          background: "linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",
        }}
      >
        <div className="max-w-7xl mx-auto grid md:grid-cols-2 gap-12 items-center">
          <div>
            <span className="bg-sky-500/20 text-sky-300 px-4 py-1 rounded-full text-sm font-semibold border border-sky-500/30">
              India's First Pharm.D-Led Clinical Network
            </span>

            <h1 className="text-5xl md:text-6xl font-bold mt-6 leading-tight">
              Beyond Supply. <br />
              <span className="text-sky-400">Clinical Partnership.</span>
            </h1>

            <p className="text-slate-300 text-lg mt-6 max-w-lg">
              Stop just buying medicine. Start managing your health with expert
              oversight from Pharm.D professionals. We ensure every dose is
              safe, effective, and tailored to you.
            </p>

            <div className="flex gap-4 mt-10 flex-wrap">
              <a
                href="#userform"
                className="bg-sky-500 hover:bg-sky-400 px-8 py-4 rounded-xl font-bold text-lg transition"
              >
                Get Your Safety Audit
              </a>
              <a
                href="#userform"
                className="border border-slate-500 hover:bg-white/10 px-8 py-4 rounded-xl font-bold text-lg transition"
              >
                Meet the Doctor
              </a>
            </div>
          </div>

          {/* DOCTOR CARD */}
          <div className="relative w-full max-w-lg mx-auto overflow-hidden">
            {/* CARD */}
            <AnimatePresence mode="wait">
              <motion.div
                key={index}
                initial={{ x: -120, opacity: 0 }}
                animate={{ x: 0, opacity: 1 }}
                exit={{ x: 120, opacity: 0 }}
                transition={{ duration: 0.6, ease: "easeInOut" }}
              >
                <div className="relative">
                  <div className="absolute -inset-4 bg-sky-500/20 blur-3xl rounded-full" />

                  <div className="relative bg-slate-800 border border-slate-700 p-8 rounded-3xl shadow-[0_0_20px_rgba(14,165,233,0.2)]">
                    <div className="flex items-center gap-4 mb-6">
                      {/* IMAGE */}
                      <img
                        src={doctors[index].image}
                        alt={doctors[index].name}
                        className="w-14 h-14 rounded-full object-cover border-2 border-sky-500"
                      />

                      <div>
                        <p className="font-bold text-xl">
                          {doctors[index].name}
                        </p>
                        <p className="text-sky-400 text-sm italic">
                          {doctors[index].title}
                        </p>
                        <p className="text-sky-400 text-sm italic">
                          {doctors[index].role}
                        </p>
                      </div>
                    </div>

                    <div className="space-y-4">
                      <div className="bg-slate-900/50 p-4 rounded-lg flex justify-between">
                        <span>Clinical Audits</span>
                        <span className="text-sky-400 font-bold">500+</span>
                      </div>
                      <div className="bg-slate-900/50 p-4 rounded-lg flex justify-between">
                        <span>Med-Safety Rating</span>
                        <span className="text-sky-400 font-bold">99.9%</span>
                      </div>
                    </div>
                  </div>
                </div>
              </motion.div>
            </AnimatePresence>

            {/* DOT INDICATORS */}
            <div className="flex justify-center gap-2 mt-6 mb-3">
              {doctors.map((_, i) => (
                <motion.span
                  key={i}
                  className="w-2.5 h-2.5 rounded-full bg-sky-500"
                  animate={{
                    opacity: index === i ? 1 : 0.4,
                    scale: index === i ? 1.3 : 1,
                  }}
                  transition={{ duration: 0.3 }}
                />
              ))}
            </div>
          </div>
        </div>
      </header>

      {/* FEATURES */}
      <section className="py-20 px-6 max-w-7xl mx-auto">
        <div className="text-center mb-16">
          <h2 className="text-3xl font-bold text-slate-800">
            Why SvasthyaHub is Different
          </h2>
          <p className="text-slate-500 mt-4">
            We solve the risks that standard pharmacies ignore.
          </p>
        </div>

        <div className="grid md:grid-cols-3 gap-8">
          {[
            {
              icon: "‚ö†Ô∏è",
              color: "red",
              text: "Standard pharmacies just deliver a box. They don't check if your medications clash or if they are right for you.",
              solution: "Clinical Safety Audits",
            },
            {
              icon: "üíä",
              color: "blue",
              text: "Patients often miss doses or take them incorrectly, leading to slow recovery or complications.",
              solution: "Adherence Coaching",
            },
            {
              icon: "üõ°Ô∏è",
              color: "green",
              text: "Side effects go unreported. Patients suffer in silence without knowing if it's the drug or the disease.",
              solution: "Pharmacovigilance",
            },
          ].map((item, i) => (
            <div
              key={i}
              className="bg-white p-8 rounded-2xl border border-slate-200 hover:shadow-xl transition group"
            >
              <div
                className={`w-14 h-14 bg-${item.color}-100 text-${item.color}-600 rounded-full flex items-center justify-center mb-6 text-2xl group-hover:scale-110 transition`}
              >
                {item.icon}
              </div>
              <h3 className="text-xl font-bold mb-3">The Problem</h3>
              <p className="text-slate-500 mb-6">{item.text}</p>
              <div className="pt-6 border-t border-slate-100 text-sky-600 font-semibold">
                Our Solution: {item.solution}
              </div>
            </div>
          ))}
        </div>
      </section>

      {/*User Form */}
      <div
        id="userform"
        className="flex justify-center items-center p-4  bg-gradient-to-br from-blue-50 to-blue-100 mb-2"
      >
        <div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md">
          {/* USER FORM */}
          {selectedRole === "user" && (
            <>
              <h1 className="text-2xl font-bold mb-4 text-center">
                {isLogin
                  ? "User Can Login Here üëá"
                  : "User Can Register Here üëá"}
              </h1>

              <form onSubmit={handleSubmit} className="space-y-4">
                {!isLogin && (
                  <>
                    <input
                      name="name"
                      type="text"
                      placeholder="Full Name"
                      value={form.name}
                      onChange={handleChange}
                      className="w-full border p-2 rounded"
                      required
                    />
                    <input
                      name="bloodGroup"
                      type="text"
                      placeholder="Blood Group"
                      value={form.bloodGroup}
                      onChange={handleChange}
                      className="w-full border p-2 rounded"
                      required
                    />
                    <input
                      name="age"
                      type="number"
                      placeholder="Age"
                      value={form.age}
                      onChange={handleChange}
                      className="w-full border p-2 rounded"
                      required
                    />
                  </>
                )}

                
                <input
                  name="email"
                  placeholder="Email"
                  value={form.email}
                  onChange={handleChange}
                  className="w-full border p-2 rounded"
                />  

                <input
                  name="phone"
                  placeholder="Phone"
                  value={form.phone}
                  onChange={(e) => {
                    const value = e.target.value
                      .replace(/\D/g, "")
                      .slice(0, 10);
                    setForm({ ...form, phone: value });
                  }}
                  maxLength={10}
                  inputMode="numeric"
                  pattern="[0-9]{10}"
                  className="w-full border p-2 rounded"
                />

                {/* PASSWORD WITH EYE */}
                <div className="relative">
                  <input
                    type={showPassword ? "password" : "text"}
                    name="password"
                    placeholder="Password"
                    value={form.password}
                    onChange={handleChange}
                    className="w-full border p-2 rounded pr-10"
                    required
                  />
                  <button
                    type="button"
                    onClick={() => setShowPassword(!showPassword)}
                    className="absolute right-3 top-2.5 text-gray-500"
                  >
                    {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}
                  </button>
                </div>

                <button
                  disabled={loading}
                  className="w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 disabled:opacity-50"
                >
                  {loading ? "Logging in..." : isLogin ? "Login" : "Register"}
                </button>
              </form>

              <p
                className="text-sm text-center mt-4 text-blue-600 cursor-pointer"
                onClick={() => setIsLogin(!isLogin)}
              >
                {isLogin
                  ? "Don't have an account? Register"
                  : "Already have an account? Login"}
              </p>
            </>
          )}
        </div>
      </div>

      {/* CTA */}
      <section className="bg-sky-600 py-16 px-6 text-center text-white">
        <h2 className="text-4xl font-bold mb-6">
          Ready for a safer healthcare journey?
        </h2>
        <p className="text-sky-100 text-xl mb-10 max-w-2xl mx-auto">
          Upload your prescription for a complimentary Clinical Safety Audit by
          our Pharm.D team.
        </p>
        <a
          href="#userform"
          className="inline-block bg-white text-sky-600 px-10 py-4 rounded-full font-bold text-xl hover:bg-slate-100 transition shadow-lg"
        >
          Upload Prescription
        </a>
      </section>

      {/* FOOTER */}
      <footer className="py-10 text-center text-slate-500 text-sm">
        ¬© 2025 SvasthyaHub. Founded by Dr. Ankit Rana.
      </footer>
    </div>
  );
};

export default Login;
</file>

<file path="src/screens/PharmacistLogin.jsx">
import React, { useState } from "react";
import axios from "axios";
import { useNavigate } from "react-router-dom";
import { useAuth } from "../context/AuthContext";
import { Eye, EyeOff } from "lucide-react";

const PharmacistLogin = () => {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [error, setError] = useState("");
  const [loading, setLoading] = useState(false);
  const [showPassword, setShowPassword] = useState(true);

  const [partnerOpen, setPartnerOpen] = useState(false);
  const [downloadOpen, setDownloadOpen] = useState(false);

  const navigate = useNavigate();
  const { loginPharmacist } = useAuth();

  const handleLogin = async (e) => {
    e.preventDefault();
    setLoading(true);
    try {
      const res = await axios.post(
        `${import.meta.env.VITE_BACKEND_URL}/api/pharmacist-auth/login`,
        { email, password }
      );

      loginPharmacist(res.data.token); // ‚úÖ updates React state

      navigate("/pharmacy-admin", { replace: true });
    } catch {
      setError("Invalid credentials");
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="text-slate-800 antialiased scroll-smooth">
      {/* HERO */}
      <header className="pt-32 pb-20 border-b border-blue-100 bg-[radial-gradient(#bae6fd_1px,transparent_1px)] bg-[size:32px_32px] bg-[#f0f9ff]">
        <div className="max-w-7xl mx-auto px-6 grid md:grid-cols-2 gap-12 items-center">
          <div>
            <span className="inline-block bg-blue-100 text-blue-700 px-4 py-1.5 rounded-full text-sm font-bold mb-6">
              üöÄ Incubated at NIMS University
            </span>

            <h1 className="text-4xl md:text-6xl font-extrabold text-slate-900 leading-tight mb-6">
              India‚Äôs First <span className="text-blue-600">PharmD-Led</span>
              <br />
              Clinical Pharmacy Network.
            </h1>

            <p className="text-lg text-slate-600 mb-8 leading-relaxed">
              Transforming local medical stores into trusted centers for
              <strong> Affordable Quality Medicines</strong> & expert guidance.
            </p>

            <div className="flex flex-col sm:flex-row gap-4">
              {/* <button
                onClick={() => setPartnerOpen(true)} */}
                <a href="#pharmacistform"
                className="bg-blue-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:bg-blue-700 shadow-lg shadow-blue-200 transition"
              >
                Become a Partner
                </a>
              {/* </button> */}
              <button
                onClick={() => setDownloadOpen(true)}
                className="bg-white border border-slate-300 px-8 py-4 rounded-xl font-bold text-lg hover:bg-slate-50 transition"
              >
                Download App
              </button>
            </div>
          </div>

          {/* MOCK CARD */}
          <div className="relative">
            <div className="absolute inset-0 bg-blue-600 rounded-3xl rotate-3 opacity-10" />
            <div className="relative bg-white p-8 rounded-3xl shadow-2xl border">
              <div className="flex items-center gap-4 mb-6 border-b pb-6">
                <div className="h-12 w-12 bg-green-100 rounded-full flex items-center justify-center">
                  ‚úÖ
                </div>
                <div>
                  <h3 className="font-bold text-lg">PharmD Verified Safe</h3>
                  <p className="text-sm text-slate-500">
                    Interaction Check Passed
                  </p>
                </div>
              </div>

              <Medicine
                name="SvasthyaHub Metformin 500"
                mrp="‚Çπ45"
                price="‚Çπ18.00"
              />
              <Medicine
                name="SvasthyaHub Telmisartan 40"
                mrp="‚Çπ55"
                price="‚Çπ22.00"
              />

              <div className="mt-6 text-center">
                <span className="bg-red-50 text-red-600 text-xs font-bold px-3 py-1 rounded-full">
                  ‚ù§Ô∏è 500+ Hero Points Earned
                </span>
              </div>
            </div>
          </div>
        </div>
      </header>

      {/* FEATURES */}
      <section id="features" className="py-10 bg-slate-50">
        <div className="max-w-7xl mx-auto px-6 text-center">
          <h2 className="text-3xl font-bold mb-4">Why SvasthyaHub?</h2>
          <p className="text-slate-600 max-w-2xl mx-auto mb-16">
            Clinical expertise meets supply-chain efficiency.
          </p>

          <div className="grid md:grid-cols-3 gap-8">
            <Feature
              title="Clinical Safety First"
              desc="Every prescription is checked for interactions."
            />
            <Feature
              title="Affordable Quality"
              desc="WHO-GMP medicines at 60% lower cost."
            />
            <Feature
              title="Community Loyalty"
              desc="Blood donor network with real rewards."
            />
          </div>
        </div>
      </section>

      {/*Pharmacist Form*/}
      <div
        id="pharmacistform"
        className="max-w-md mx-auto m-2  p-6 border rounded shadow "
      >
        <h2 className="flex justify-center text-xl mb-4 font-semibold">
          Pharmacist Can Login Here üëá
        </h2>

        <input
          type="email"
          className="w-full p-2 mb-3 border rounded"
          placeholder="Email"
          value={email}
          onChange={(e) => setEmail(e.target.value)}
        />

        {/* üîê Password Field */}
        <div className="relative mb-3">
          <input
            type={showPassword ? "password" : "text"}
            placeholder="Password"
            value={password}
            onChange={(e) => setPassword(e.target.value)}
            className="w-full p-2 pr-10 border rounded"
          />

          <button
            type="button"
            onClick={() => setShowPassword((p) => !p)}
            className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"
          >
            {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}
          </button>
        </div>

        <button
          onClick={handleLogin}
          disabled={loading}
          className="w-full bg-teal-600 text-white py-2 rounded disabled:opacity-50"
        >
          {loading ? "Logging in..." : "Login"}
        </button>

        {error && <p className="text-red-600 mt-2">{error}</p>}
      </div>

      {/* Pharmacist Vision */}
      <section className="w-full max-w-4xl mx-auto m-10">
        <div className="relative overflow-hidden rounded-3xl bg-white border border-slate-200 shadow-sm hover:shadow-lg transition">
          {/* Accent Line */}
          <div className="absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-purple-500 via-indigo-500 to-blue-500" />

          <div className="p-8 sm:p-10">
            {/* Heading */}
            <h2 className="text-xl  font-extrabold text-slate-900 mb-4">
              <u>Founder's Vision</u>
            </h2>
            <h2 className="text-2xl sm:text-3xl  text-slate-900 mb-4">
              Lead the Future of Pharmacy
            </h2>

            {/* Divider */}
            <div className="w-16 h-1 bg-indigo-600 rounded-full mb-6" />

            {/* Content */}
            <p className="text-slate-600 leading-relaxed text-base sm:text-lg">
              Don‚Äôt just survive the competition‚Äî
              <span className="font-semibold text-slate-800">lead it</span>.
              SvasthyaHub is empowering forward-thinking pharmacists to become
              the most trusted clinical authority in their communities.
            </p>

            <p className="text-slate-600 leading-relaxed text-base sm:text-lg mt-4">
              With our
              <span className="font-semibold text-indigo-600">
                {" "}
                Pharm.D-led clinical technology
              </span>{" "}
              and
              <span className="font-semibold text-green-600">
                {" "}
                high-margin supply chain
              </span>
              , we give you the power to protect patients, elevate your
              professional role, and grow your business with confidence.
            </p>

            <p className="text-slate-700 font-semibold text-lg mt-6 mb-4">
              Save lives. Build trust. Grow stronger.
              <span className="text-indigo-600"> Join the revolution.</span>
            </p>
            <h2 className="font-semibold  text-slate-900">
              <u>Dr. Ankit Rana</u>
            </h2>
            <h2 className="font-semibold text-slate-900">
              <u>Doctor of Pharmacy</u>
            </h2>
          </div>
        </div>
      </section>

      {/* FOOTER */}
      <footer className="bg-slate-900 text-slate-300 py-12">
        <div className="max-w-7xl mx-auto px-6 grid md:grid-cols-4 gap-8">
          <div className="md:col-span-2">
            <h3 className="text-2xl font-bold text-white">SvasthyaHub</h3>
            <p className="mt-4 text-sm max-w-xs">
              India‚Äôs safest and most affordable pharmacy network.
            </p>
          </div>
          <FooterCol
            title="Company"
            items={["About Us", "Careers", "Contact"]}
          />
          <FooterCol title="Legal" items={["Privacy Policy", "Terms of Use"]} />
        </div>

        <div className="text-center text-xs mt-12 border-t border-slate-800 pt-6">
          ¬© 2025 SvasthyaHub. All rights reserved.
        </div>
      </footer>

      {/* {partnerOpen && (
        <Modal title="Partner Login" onClose={() => setPartnerOpen(false)}>
          <a
            href=""
            className="block w-full bg-blue-600 text-white py-3 rounded-xl font-bold text-center"
          >
            Continue to Dashboard
          </a>
        </Modal>
      )}

      {downloadOpen && (
        <Modal title="Get the App" onClose={() => setDownloadOpen(false)}>
          <button className="w-full bg-slate-900 text-white py-3 rounded-xl font-bold">
            Download APK
          </button>
        </Modal>
      )} */}
    </div>
  );
};

/* ---------- COMPONENTS ---------- */

const Medicine = ({ name, mrp, price }) => (
  <div className="flex justify-between bg-slate-50 p-4 rounded-xl mb-3">
    <div>
      <p className="text-xs text-slate-500 uppercase font-bold">Medicine</p>
      <p className="font-bold">{name}</p>
    </div>
    <div className="text-right">
      <p className="text-xs line-through">{mrp}</p>
      <p className="font-bold text-green-600">{price}</p>
    </div>
  </div>
);

const Feature = ({ title, desc }) => (
  <div className="bg-white p-8 rounded-2xl border hover:shadow-xl transition">
    <h3 className="text-xl font-bold mb-3">{title}</h3>
    <p className="text-slate-600">{desc}</p>
  </div>
);

const FooterCol = ({ title, items }) => (
  <div>
    <h4 className="text-white font-bold mb-4">{title}</h4>
    <ul className="space-y-2 text-sm">
      {items.map((i) => (
        <li key={i} className="hover:text-white cursor-pointer">
          {i}
        </li>
      ))}
    </ul>
  </div>
);

// const Modal = ({ title, children, onClose }) => (
//   <div className="fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm">
//     <div className="bg-white w-full max-w-md rounded-2xl shadow-2xl p-6">
//       <div className="flex justify-between items-center mb-4">
//         <h3 className="text-xl font-bold">{title}</h3>
//         <button onClick={onClose}>‚úï</button>
//       </div>
//       {children}
//     </div>
//   </div>
// );

export default PharmacistLogin;
</file>

<file path="src/screens/PharmacyAdmin.jsx">
import React, { useEffect, useState } from "react";
import axios from "axios";
import { useNavigate } from "react-router-dom";

const PharmacyAdmin = () => {
  const [prescriptions, setPrescriptions] = useState([]);
  const [pharmacistName, setPharmacistName] = useState("");
  const [showConfirmModal, setShowConfirmModal] = useState(false);
  const [selectedPrescription, setSelectedPrescription] = useState(null);
  const [allPresent, setAllPresent] = useState(true);
  const [manualMedicines, setManualMedicines] = useState([""]);

  const navigate = useNavigate();

  /* ================= AUTH ================= */
  const getHeaders = () => {
    const token = localStorage.getItem("pharmacistToken");
    if (!token) {
      navigate("/pharmacist-login");
      return null;
    }
    return { Authorization: `Bearer ${token}` };
  };

  /* ================= FETCH ================= */
  useEffect(() => {
    fetchPharmacistInfo();
    fetchPrescriptions();
    // eslint-disable-next-line
  }, []);

  const fetchPharmacistInfo = async () => {
    const headers = getHeaders();
    if (!headers) return;

    try {
      const res = await axios.get(
        `${import.meta.env.VITE_BACKEND_URL}/api/pharmacist/me`,
        { headers }
      );
      setPharmacistName(res.data.name);
    } catch {
      navigate("/pharmacist-login");
    }
  };

  const fetchPrescriptions = async () => {
    const headers = getHeaders();
    if (!headers) return;

    try {
      const res = await axios.get(
        `${import.meta.env.VITE_BACKEND_URL}/api/prescriptions/all`,
        { headers }
      );
      setPrescriptions(res.data);
    } catch (err) {
      console.error(err);
    }
  };

  /* ================= MODAL ================= */
  const openConfirmModal = (p) => {
    setSelectedPrescription(p);
    setShowConfirmModal(true);
    setAllPresent(true);
    setManualMedicines([""]);
  };

  const closeConfirmModal = () => {
    setShowConfirmModal(false);
    setSelectedPrescription(null);
    setManualMedicines([""]);
  };

  const handleMedicineInputChange = (i, v) => {
    const updated = [...manualMedicines];
    updated[i] = v;
    setManualMedicines(updated);
  };

  const addMedicineField = () => {
    setManualMedicines([...manualMedicines, ""]);
  };

  /* ================= CONFIRM ================= */
  const handleConfirmMedicines = async () => {
    if (!selectedPrescription) return;
    const headers = getHeaders();
    if (!headers) return;

    await axios.put(
      `${import.meta.env.VITE_BACKEND_URL}/api/prescriptions/${selectedPrescription._id}/confirm`,
      {
        allPresent,
        medicines: allPresent
          ? []
          : manualMedicines.filter((m) => m.trim()),
      },
      { headers }
    );

    setPrescriptions((prev) =>
      prev.map((p) =>
        p._id === selectedPrescription._id
          ? { ...p, status: "confirmed" }
          : p
      )
    );

    closeConfirmModal();
  };

  /* ================= REJECT ================= */
  const handleReject = async (id) => {
    const headers = getHeaders();
    if (!headers) return;

    await axios.put(
      `${import.meta.env.VITE_BACKEND_URL}/api/pharmacist/prescriptions/${id}/reject`,
      {},
      { headers }
    );

    setPrescriptions((prev) =>
      prev.map((p) =>
        p._id === id ? { ...p, status: "rejected" } : p
      )
    );
  };

  /* ================= UI ================= */
  return (
    <div className="min-h-screen p-4 bg-gray-50">
      <h1 className="text-3xl font-bold text-center mb-6">
        Welcome, {pharmacistName}
      </h1>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        {prescriptions.map((p) => (
          <div key={p._id} className="bg-white p-4 rounded shadow">
            <span className="text-xs text-gray-500">
              {p.type === "manual"
                ? "Manual Request"
                : "Uploaded Prescription"}
            </span>

            {/* üëÅÔ∏è VIEW PRESCRIPTION (RESTORED) */}
            {p.type === "upload" && p.filename && (
              <p className="mt-2">
                <a
                  href={`${import.meta.env.VITE_BACKEND_URL}/api/prescriptions/image/${p.filename}`}
                  target="_blank"
                  rel="noreferrer"
                  className="text-blue-600 underline text-sm"
                >
                  View Prescription
                </a>
              </p>
            )}

            {/* üíä MANUAL MEDICINES */}
            {p.type === "manual" && (
              <>
                <p className="font-semibold mt-2 text-sm">
                  Medicines:
                </p>
                <ul className="list-disc ml-4 text-sm">
                  {p.medicines?.map((m, i) => (
                    <li key={i}>{m}</li>
                  ))}
                </ul>
              </>
            )}

            <p className="text-sm mt-2">
              <b>User:</b> {p.userEmail}
            </p>

            <p className="text-sm">
              <b>Status:</b>{" "}
              <span
                className={
                  p.status === "confirmed"
                    ? "text-green-600"
                    : p.status === "rejected"
                    ? "text-red-600"
                    : "text-yellow-600"
                }
              >
                {p.status || "pending"}
              </span>
            </p>

            <div className="flex gap-2 mt-4">
              <button
                onClick={() => openConfirmModal(p)}
                disabled={p.status === "confirmed"}
                className="bg-green-600 text-white px-3 py-1 rounded disabled:opacity-50"
              >
                Accept
              </button>
              <button
                onClick={() => handleReject(p._id)}
                disabled={p.status === "rejected"}
                className="bg-red-600 text-white px-3 py-1 rounded disabled:opacity-50"
              >
                Reject
              </button>
            </div>
          </div>
        ))}
      </div>

      {/* ================= CONFIRM MODAL ================= */}
      {showConfirmModal && (
        <div className="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center">
          <div className="bg-white p-4 rounded w-80">
            <h2 className="font-bold mb-2">Confirm Medicines</h2>

            <label>
              <input
                type="radio"
                checked={allPresent}
                onChange={() => setAllPresent(true)}
              />{" "}
              All medicines present
            </label>

            <label className="block mt-2">
              <input
                type="radio"
                checked={!allPresent}
                onChange={() => setAllPresent(false)}
              />{" "}
              Not all present
            </label>

            {!allPresent && (
              <div className="mt-2">
                {manualMedicines.map((m, i) => (
                  <input
                    key={i}
                    value={m}
                    onChange={(e) =>
                      handleMedicineInputChange(i, e.target.value)
                    }
                    className="border w-full mb-1 px-2 py-1"
                    placeholder={`Medicine ${i + 1}`}
                  />
                ))}
                <button
                  onClick={addMedicineField}
                  className="text-blue-600 text-sm"
                >
                  + Add Medicine
                </button>
              </div>
            )}

            <div className="flex gap-2 mt-4">
              <button
                onClick={handleConfirmMedicines}
                className="bg-green-600 text-white px-3 py-1 rounded"
              >
                Confirm
              </button>
              <button
                onClick={closeConfirmModal}
                className="bg-gray-400 text-white px-3 py-1 rounded"
              >
                Cancel
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default PharmacyAdmin;
</file>

<file path="src/screens/Profile.jsx">
import React, { useEffect, useState } from "react";
import axios from "axios";
import bgImage from "../assets/pbgc.avif";
import { useAuth } from "../context/AuthContext";

const Profile = () => {
  const { user } = useAuth();
  const userEmail = user?.email;

  const [userData, setUserData] = useState({
    name: "",
    age: "",
    gender: "",
    bloodGroup: "",
    height: "",
    weight: "",
    allergies: "",
    medicalConditions: "",
    medications: "",
    fathername: "",
    mothername: "",
    emergencyContact: { name: "", phone: "", relation: "" },
    achievements: [],
  });

  const [editMode, setEditMode] = useState(false);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState("");
  const [userName, setUserName] = useState("");
  

  // Fetch profile data
  useEffect(() => {
    if (!userEmail) {
      setError("User not logged in. Please log in again.");
      return;
    }
    fetchProfile();
  }, [userEmail]);

   useEffect(() => {
      if (user && user.name) {
        setUserName(user.name); // Use user from parent state if available
      } else {
        const storedUser = localStorage.getItem("user");
        if (storedUser) {
          const parsedUser = JSON.parse(storedUser);
          setUserName(parsedUser.name);
        }
      }
    }, [user]);

  const fetchProfile = async () => {
    setLoading(true);
    setError("");
    try {
      const res = await axios.get(
        `${import.meta.env.VITE_BACKEND_URL}/api/profile/${encodeURIComponent(userEmail)}`
      );
      const data = res.data || {};

      // Ensure emergencyContact is always an object
      setUserData({
        ...userData,
        ...data,
        emergencyContact: data.emergencyContact || {
          name: "",
          phone: "",
          relation: "",
        },
        achievements: data.achievements || [],
      });
    } catch (err) {
      console.error("Profile fetch error:", err);
      setError("Error fetching profile: " + (err.response?.data?.msg || err.message));
    } finally {
      setLoading(false);
    }
  };

  const handleChange = (e) => {
    const { name, value } = e.target;
    if (name.startsWith("emergencyContact.")) {
      const field = name.split(".")[1];
      setUserData((prev) => ({
        ...prev,
        emergencyContact: {
          ...prev.emergencyContact,
          [field]: value,
        },
      }));
    } else {
      setUserData((prev) => ({ ...prev, [name]: value }));
    }
  };

  const handleSave = async () => {
    if (!userEmail) {
      setError("User email unavailable.");
      return;
    }
    setLoading(true);
    setError("");
    try {
      const res = await axios.post(
        `${import.meta.env.VITE_BACKEND_URL}/api/profile/${encodeURIComponent(userEmail)}`,
        userData
      );
      setUserData(res.data);
      setEditMode(false);
      alert("Profile updated successfully!");
    } catch (err) {
      console.error("Profile save error:", err);
      setError("Failed to save profile. " + (err.response?.data?.msg || err.message));
    } finally {
      setLoading(false);
    }
  };

  const renderInput = (field, label, type = "text") => (
    <div key={field}>
      <p className="text-gray-500 font-medium">{label}</p>
      {editMode ? (
        <input
          type={type}
          name={field}
          value={userData[field] || ""}
          onChange={handleChange}
          className="border rounded p-2 w-full mt-1 placeholder:text-gray-400"
          placeholder={`Enter ${label.toLowerCase()}`}
        />
      ) : (
        <p className="text-gray-900 font-semibold">
          {userData[field] || "Not provided"}
        </p>
      )}
    </div>
  );

  const renderEmergencyInput = (field, label) => (
    <div key={field}>
      <p className="text-gray-500 font-medium">{label}</p>
      {editMode ? (
        <input
          type="text"
          name={`emergencyContact.${field}`}
          value={userData?.emergencyContact?.[field] || ""}
          onChange={handleChange}
          className="border rounded p-2 w-full mt-1 placeholder:text-gray-400"
          placeholder={`Enter ${label.toLowerCase()}`}
        />
      ) : (
        <p className="text-gray-900 font-semibold">
          {userData?.emergencyContact?.[field] || "Not provided"}
        </p>
      )}
    </div>
  );

  if (loading && !editMode)
    return (
      <div className="min-h-screen bg-gray-100 flex items-center justify-center">
        <p className="text-xl text-gray-700">Loading profile...</p>
      </div>
    );

  return (
    <div
      className="min-h-screen bg-gray-100 p-6 bg-cover bg-center"
      // style={{ backgroundImage: `url(${bgImage})` }}
    >
      <h1 className="text-4xl font-bold text-gray-800 mb-8 text-center"> Hello, <span className="text-teal-600">{userName || "Guest"}</span></h1>

      {error && (
        <div className="max-w-4xl mx-auto mb-4 p-4 bg-red-100 border border-red-400 rounded">
          <p className="text-red-700">{error}</p>
        </div>
      )}

      <div className="max-w-4xl mx-auto bg-white shadow-xl rounded-2xl p-8 space-y-8">
        {/* Toggle Edit */}
        <h1 className="text-2xl font-bold text-gray-800 mb-8 text-center"><u>MEDICAL REPORT</u></h1>
        <div className="flex justify-between items-center mb-4">
          <h2 className="text-2xl font-semibold text-gray-700">Profile Information</h2>
          <button
            onClick={() => setEditMode(!editMode)}
            disabled={loading}
            className="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-400"
          >
            {editMode ? "Cancel Edit" : "Edit Profile"}
          </button>
        </div>

        {/* Personal Info */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {renderInput("name", "Full Name")}
          {renderInput("age", "Age", "number")}
          {renderInput("gender", "Gender")}
          {renderInput("bloodGroup", "Blood Group")}
          {renderInput("height", "Height")}
          {renderInput("weight", "Weight")}
          {renderInput("allergies", "Allergies")}
          {renderInput("medicalConditions", "Medical Conditions")}
          {renderInput("medications", "Medications")}
        </div>

        {/* Emergency Contact */}
        <div>
          <h2 className="text-2xl font-semibold text-gray-700 mb-4">Emergency Contact</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            {renderEmergencyInput("name", "Contact Name")}
            {renderEmergencyInput("relation", "Relation")}
            {renderEmergencyInput("phone", "Phone")}
          </div>
        </div>

        {/* Achievements */}
        <div>
          <h2 className="text-2xl font-bold text-gray-800 text-center mb-4"><u>Achievements</u></h2>
          <ul className="space-y-2">
            {userData.achievements?.length > 0 ? (
              userData.achievements.map((ach, idx) => (
                <li
                  key={idx}
                  className="bg-gradient-to-br from-red-50 to-pink-100 border border-red-200 rounded-xl p-4 shadow-sm"
                >
                  <p className="font-semibold text-gray-800">{ach.title}</p>
                  <p className="text-sm text-gray-600">
                    {new Date(ach.date).toLocaleDateString()} ‚Äì{" "}
                    {ach.location || "Unknown location"}
                  </p>
                  {ach.donorCode && (
                    <p className="text-sm text-green-700 font-medium mt-1">
                      Donor Code: {ach.donorCode}
                    </p>
                  )}
                </li>
              ))
            ) : (
              <p className="text-gray-600">No achievements yet.</p>
            )}
          </ul>
        </div>

        {/* Save Button */}
        {editMode && (
          <div className="flex justify-center mt-6">
            <button
              onClick={handleSave}
              disabled={loading}
              className="bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600 disabled:bg-gray-400"
            >
              {loading ? "Saving..." : "Save Profile"}
            </button>
          </div>
        )}
      </div>
    </div>
  );
};

export default Profile;
</file>

<file path="src/screens/Raksha.jsx">
// src/screens/Raksha.jsx
import React, { useState, useEffect } from "react";
import axios from "axios";
import Confetti from "react-confetti";
import { useAuth } from "../context/AuthContext";

const Raksha = () => {
  const { user } = useAuth();
  const [requests, setRequests] = useState([]);
  const [formData, setFormData] = useState({ group: "", units: "", locationName: "" });
  const [loading, setLoading] = useState(false);
  const [showDonorCode, setShowDonorCode] = useState(false);
  const [donorCode, setDonorCode] = useState("");
  const [error, setError] = useState("");
  const [serverStatus, setServerStatus] = useState("checking");
  const [thankYou, setThankYou] = useState(false);
  const [showConfetti, setShowConfetti] = useState(false);
  const [windowSize, setWindowSize] = useState({ width: window.innerWidth, height: window.innerHeight });

  // Check backend status
  const checkServerStatus = async () => {
    try {
      await axios.get(`${import.meta.env.VITE_BACKEND_URL}`);
      setServerStatus("online");
      setError("");
    } catch {
      setServerStatus("offline");
      setError("Backend server is not running. Please start it.");
    }
  };

  // Fetch all requests
  const fetchRequests = async () => {
    if (serverStatus !== "online") return;
    try {
      const res = await axios.get(`${import.meta.env.VITE_BACKEND_URL}/api/requests`);
      const filtered = res.data.filter(req => req.status === "open" || req.status === "accepted");
      setRequests(filtered);
      setError("");
    } catch (err) {
      console.error("Fetch error:", err);
      if (err.code === "ERR_NETWORK") {
        setServerStatus("offline");
        setError("Cannot connect to backend server.");
      } else setError("Error fetching requests: " + (err.response?.data?.message || err.message));
    }
  };

  useEffect(() => {
    checkServerStatus();
    const handleResize = () => setWindowSize({ width: window.innerWidth, height: window.innerHeight });
    window.addEventListener("resize", handleResize);
    return () => window.removeEventListener("resize", handleResize);
  }, []);

  useEffect(() => {
    if (serverStatus === "online") fetchRequests();
  }, [serverStatus]);

  const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });

  // ü©∏ Submit new request
  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!user || !user.email) return alert("User not logged in!");
    if (!formData.group || !formData.units || !formData.locationName) return alert("Fill all fields!");
    setLoading(true);
    try {
      const res = await axios.post(`${import.meta.env.VITE_BACKEND_URL}/api/requests/request`, {
        ...formData,
        units: Number(formData.units),
        requesterEmail: user.email,
        lat: null,
        lng: null,
      });
      setRequests([...requests, res.data]);
      setFormData({ group: "", units: "", locationName: "" });
      alert("Request submitted successfully!");
    } catch (err) {
      console.error("Request error:", err);
      alert("Error: " + (err.response?.data?.message || err.message));
    } finally {
      setLoading(false);
    }
  };

  // ü©∏ Donor accepts request
  const handleAccept = async (requestId) => {
    if (serverStatus !== "online") return setError("Backend server is offline.");
    if (!user || !user.email) return alert("User not logged in!");
    setLoading(true);
    try {
      const randomCode = Math.floor(100000 + Math.random() * 900000).toString();
      await axios.put(`${import.meta.env.VITE_BACKEND_URL}/api/requests/${requestId}/accept`, {
        donorEmail: user.email,
        donorCode: randomCode,
        donorName: user.name,
        donorPhone: user.phone,
      });
      setDonorCode(randomCode);
      setShowDonorCode(true);
      fetchRequests();
    } catch (err) {
      console.error("Accept error:", err);
      alert("Error: " + (err.response?.data?.message || err.message));
    } finally {
      setLoading(false);
    }
  };

  // ü©∏ Requester confirms donation
  const handleConfirmDonation = async (requestId) => {
    try {
      const res = await axios.post(`${import.meta.env.VITE_BACKEND_URL}/api/requests/confirmDonation/${requestId}`);
      setDonorCode(res.data.donorCode);
      setThankYou(true);
      setShowConfetti(true);
      setTimeout(() => setShowConfetti(false), 5000);
      fetchRequests();
    } catch (err) {
      console.error("Confirm donation error:", err);
      alert("Error confirming donation.");
    }
  };

  const closeDonorPopup = () => {
    setShowDonorCode(false);
    setDonorCode("");
  };

  const retryConnection = () => {
    setServerStatus("checking");
    checkServerStatus();
  };

  return (
    <div className="min-h-screen p-6 bg-gray-100 relative">
      <h1 className="text-3xl font-bold mb-6 text-center">ü©∏ Blood Requests</h1>

      {showConfetti && <Confetti width={windowSize.width} height={windowSize.height} />}

      {/* Backend offline */}
      {serverStatus === "offline" && (
        <div className="max-w-4xl mx-auto mb-4 p-4 bg-red-100 border border-red-400 rounded">
          <p className="text-red-700 font-semibold">‚ö†Ô∏è Backend Server Offline</p>
          <p className="text-red-600 mb-2">{error}</p>
          <button onClick={retryConnection} className="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
            Retry
          </button>
        </div>
      )}

      {/* Form for requester */}
      {serverStatus === "online" && (
        <div className="max-w-md mx-auto bg-white p-6 rounded shadow mb-8">
          <h2 className="text-xl font-semibold mb-4">Create a Request</h2>
          <form onSubmit={handleSubmit} className="space-y-4">
            <input type="text" name="group" placeholder="Blood Group (e.g., A+)" className="border p-2 w-full rounded"
              value={formData.group} onChange={handleChange} />
            <input type="number" name="units" placeholder="Units" className="border p-2 w-full rounded"
              value={formData.units} onChange={handleChange} />
            <input type="text" name="locationName" placeholder="Location (e.g., City Hospital)"
              className="border p-2 w-full rounded" value={formData.locationName} onChange={handleChange} />
            <button type="submit" disabled={loading}
              className="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 disabled:bg-gray-400">
              {loading ? "Submitting..." : "Submit Request"}
            </button>
          </form>
        </div>
      )}

      {/* Donor Thank You Popup */}
      {showDonorCode && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 animate-fadeIn">
          <div className="bg-white p-6 rounded-lg shadow-lg max-w-md mx-auto animate-bounceIn text-center">
            <h2 className="text-2xl font-bold text-green-600 mb-4">Thank You! üôè</h2>
            <p className="text-lg mb-2">You‚Äôve accepted this request.</p>
            <div className="bg-yellow-100 p-4 rounded mb-4">
              <p className="font-semibold">Your Donor Code:</p>
              <p className="text-2xl font-bold text-red-600 my-2">{donorCode}</p>
              <p className="text-sm text-gray-600">Please share this code after donating.</p>
            </div>
            <button onClick={closeDonorPopup} className="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 w-full">
              OK
            </button>
          </div>
        </div>
      )}

      {/* Thank You Confirmation Modal (Requester side) */}
      {thankYou && (
        <div className="fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 animate-fadeIn">
          <div className="bg-white rounded-2xl p-8 shadow-xl text-center w-80 animate-bounceIn">
            <h2 className="text-2xl font-bold text-green-700 mb-2">Donation Confirmed! üéâ</h2>
            <p className="mb-2">The donor successfully donated blood.</p>
            <p className="font-semibold text-red-600 text-lg mb-2">Code: {donorCode}</p>
            <p className="text-gray-600 text-sm mb-4">A new achievement has been added to donor‚Äôs profile üèÖ</p>
            <button onClick={() => setThankYou(false)} className="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
              Close
            </button>
          </div>
        </div>
      )}

      {/* Requests */}
      {serverStatus === "online" && (
        <div className="max-w-4xl mx-auto">
          <h2 className="text-2xl font-semibold mb-4">Existing Requests</h2>
          {requests.length === 0 ? (
            <p className="text-center text-gray-500">No active blood requests.</p>
          ) : (
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              {requests.map((req) => (
                <div key={req._id} className="bg-white p-4 rounded shadow relative">
                  <div className={`absolute top-0 left-0 w-2 h-full ${req.status === "accepted" ? "bg-green-500" : "bg-red-500"}`}></div>
                  <div className="ml-3">
                    <p><strong>Blood Group:</strong> {req.group}</p>
                    <p><strong>Units:</strong> {req.units}</p>
                    <p><strong>Location:</strong> {req.location.name}</p>
                    <p><strong>Requester:</strong> {req.requester}</p>
                    <p><strong>Status:</strong>
                      <span className={`font-semibold ${req.status === "accepted" ? "text-green-600" : "text-red-600"}`}>
                        {req.status.toUpperCase()}
                      </span>
                    </p>

                    {req.status === "accepted" && req.donor && (
                      <div className="mt-2 p-2 bg-green-50 rounded">
                        <p><strong>Accepted by:</strong> {req.donorName || req.donor}</p>
                        {req.donorPhone && <p><strong>Donor Phone:</strong> {req.donorPhone}</p>}
                        {req.donorCode && <p><strong>Donor Code:</strong> {req.donorCode}</p>}
                      </div>
                    )}

                    {/* Donor buttons */}
                    {req.status === "open" && req.requester !== user?.email && (
                      <div className="flex space-x-2 mt-3">
                        <button onClick={() => handleAccept(req._id)} disabled={loading}
                          className="bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600 disabled:bg-gray-400">
                          Accept
                        </button>
                        <button onClick={() => setRequests(requests.filter(r => r._id !== req._id))}
                          className="bg-gray-500 text-white px-3 py-1 rounded text-sm hover:bg-gray-600">
                          Reject
                        </button>
                      </div>
                    )}

                    {/* Requester: Confirm Donation */}
                    {req.status === "accepted" && req.requester === user?.email && !req.donationConfirmed && (
                      <div className="mt-3">
                        <p className="text-sm text-gray-700 mb-1">Has the donor successfully donated blood?</p>
                        <button onClick={() => handleConfirmDonation(req._id)}
                          className="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">
                          ‚úÖ Yes, Donated
                        </button>
                      </div>
                    )}

                    {req.requester === user?.email && (
                      <p className="text-sm text-blue-600 mt-2">
                        This is your request {req.status === "accepted" && "- It has been accepted!"}
                      </p>
                    )}
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>
      )}

      <style>
        {`
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .animate-fadeIn { animation: fadeIn 0.3s ease-in-out; }
        @keyframes bounceIn {
          0% { transform: scale(0.8); opacity: 0; }
          50% { transform: scale(1.05); opacity: 1; }
          100% { transform: scale(1); }
        }
        .animate-bounceIn { animation: bounceIn 0.5s ease-in-out; }
        `}
      </style>
    </div>
  );
};

export default Raksha;
</file>

<file path="src/screens/Suraksha.jsx">
import React, { useState } from "react";

const paymentOptions = [
  { id: "upi", label: "UPI / QR Code" },
  { id: "card", label: "Credit/Debit Card" },
  { id: "netbanking", label: "Net Banking" },
  { id: "wallet", label: "Wallets" }
];

const Suraksha = () => {
  const plans = [
    {
      name: "Free / Always",
      price: 0,
      duration: "per Year",
      features: [
        "Digital Health Locker",
        "Medication Reminder",
        "Standarad 10% Pharmacy Discount",
        "Standarad Discount on Lab test"
      ],
      color: "bg-gradient-to-br from-cyan-50 to-cyan-100",
      hover: "hover:shadow-xl hover:-translate-y-1",
      popular: false,
    },
    {
      name: "Basic",
      price: 999,
      duration: "per Year",
      features: [
        "Digital Health Locker",
        "Medication Reminder",
        "Standarad 10% Pharmacy Discount",
        "Standarad Discount on Lab test"
      ],
      color: "bg-gradient-to-br from-cyan-50 to-cyan-100",
      hover: "hover:shadow-xl hover:-translate-y-1",
      popular: false,
    },
    {
      name: "Standard",
      price: 1999,
      duration: "per Year",
      features: [
        "Basic coverage",
        "Priority support",
        "Discounted medicines"
      ],
      color: "bg-gradient-to-br from-cyan-50 to-cyan-100",
      hover: "hover:shadow-2xl hover:-translate-y-2",
      popular: true,
    },
    {
      name: "Premium",
      price: 3599,
      duration: "per Year",
      features: [
        "All Standard features",
        "Full coverage",
        "Dedicated health advisor"
      ],
      color: "bg-gradient-to-br from-cyan-50 to-cyan-100",
      hover: "hover:shadow-xl hover:-translate-y-1",
      popular: false,
    },
  ];

  const [showPaymentModal, setShowPaymentModal] = useState(false);
  const [selectedPlan, setSelectedPlan] = useState(null);

  const handleSubscribe = (plan) => {
    setSelectedPlan(plan);
    setShowPaymentModal(true);
  };

  const closeModal = () => {
    setShowPaymentModal(false);
    setSelectedPlan(null);
  };

  return (
    <div className="min-h-screen bg-slate-50 p-6 sm:p-8 md:p-12 overflow-y-auto bg-cover bg-center">
      <h1 className="text-6xl font-bold text-gray-700 mt-2 mb-4 text-center">
        Donors Who Deserves Care.
      </h1>
      <h1 className="text-4xl font-extrabold text-gray-900 mb-12 text-center">
        Svasthya <span className="text-teal-600">Suraksha</span>
      </h1>

      <div className="flex flex-row flex-wrap justify-center max-w-6xl mx-auto gap-16">
        {plans.map((plan, index) => (
          <div
            key={index}
            className={`relative rounded-3xl p-8 flex flex-col items-center justify-between transform transition duration-300 ${plan.color} ${plan.hover} shadow-md w-72`}
          >
            {/* Popular Badge */}
            {plan.popular && (
              <span className="absolute top-2.5 right-3 bg-teal-600 text-white px-3 py-1 rounded-full text-sm font-semibold">
                Most Popular
              </span>
            )}

            <h2 className="text-2xl font-bold text-gray-800 mb-4">{plan.name}</h2>

            <p className="text-5xl font-extrabold text-teal-700 mb-1">‚Çπ{plan.price}</p>
            <p className="text-gray-600 mb-6">{plan.duration}</p>

            <ul className="text-gray-700 mb-6 list-disc list-inside space-y-2 self-start">
              {plan.features.map((feature, i) => (
                <li key={i} className="leading-relaxed">{feature}</li>
              ))}
            </ul>

            <button
              className={`w-full py-4 rounded-xl font-semibold text-white transition ${
                plan.popular ? "bg-teal-600 hover:bg-teal-700" : "bg-teal-600 hover:bg-teal-700"
              }`}
              onClick={() => handleSubscribe(plan)}
            >
              Subscribe
            </button>
          </div>
        ))}
      </div>
      <h1 className="text-5xl font-bold text-gray-700 mt-6 text-center">
        The Gift of Health is the Greatest Reward.
      </h1>

      {/* Payment Modal */}
      {showPaymentModal && (
        <div className="fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-50 animate-fadeIn">
          <div className="bg-white rounded-xl p-8 shadow-xl w-[90vw] max-w-md relative">
            <button
              className="absolute top-2 right-2 text-lg text-gray-500 hover:text-gray-800"
              onClick={closeModal}
              aria-label="Close payment options"
            >&times;</button>
            <h2 className="text-2xl font-bold mb-4 text-center">Choose Payment Method</h2>
            <ul className="space-y-4 my-6">
              {paymentOptions.map(opt => (
                <li key={opt.id}>
                  <button
                    className="w-full bg-teal-100 hover:bg-teal-200 text-teal-800 py-3 px-4 rounded-lg font-semibold transition"
                    onClick={() => alert(`You selected: ${opt.label}`)}
                  >
                    {opt.label}
                  </button>
                </li>
              ))}
            </ul>
            <button className="w-full mt-2 text-gray-600 underline" onClick={closeModal}>Cancel</button>
          </div>
        </div>
      )}
    </div>
  );
};

export default Suraksha;
</file>

<file path="src/screens/UserDashboard.jsx">
import React, { useEffect, useState } from "react";
import { useNavigate } from "react-router-dom";

import { Link } from "react-router-dom";

/* ---------------- ICON COMPONENT ---------------- */
const Icon = ({ children, className }) => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    strokeWidth="2"
    strokeLinecap="round"
    strokeLinejoin="round"
    className={className}
  >
    {children}
  </svg>
);

const Icons = {
  Home: () => (
    <Icon className="w-5 h-5">
      <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
    </Icon>
  ),

  Box: () => (
    <Icon className="w-5 h-5">
      <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4" />
    </Icon>
  ),

  Shield: () => (
    <Icon className="w-10 h-10">
      <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
    </Icon>
  ),

  Truck: () => (
    <Icon className="w-5 h-5">
      <rect x="1" y="3" width="15" height="13" />
      <polygon points="16 8 20 8 23 11 23 16 16 16 16 8" />
      <circle cx="5.5" cy="18.5" r="2.5" />
      <circle cx="18.5" cy="18.5" r="2.5" />
    </Icon>
  ),

  Image: () => (
    <Icon className="w-5 h-5">
      <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
      <circle cx="8.5" cy="8.5" r="1.5" />
      <polyline points="21 15 16 10 5 21" />
    </Icon>
  ),

  Drop: () => (
    <Icon className="w-5 h-5">
      <path d="M12 2.69l5.74 5.74c2.58 2.58 2.58 6.76 0 9.34a6.6 6.6 0 0 1-9.34 0c-2.58-2.58-2.58-6.76 0-9.34L12 2.69z" />
    </Icon>
  ),
};

/* ---------------- MAIN COMPONENT ---------------- */
const UserDashboard = ({ user }) => {
  const navigate = useNavigate();
  const [userName, setUserName] = useState("Guest");

  useEffect(() => {
    if (user && user.name) {
      setUserName(user.name);
    } else {
      const storedUser = localStorage.getItem("user");
      if (storedUser) {
        setUserName(JSON.parse(storedUser).name);
      }
    }
  }, [user]);

  const cards = [
    // {
    //   name: "Aushadhi",
    //   route: "/aushadhi",
    //   color: "bg-blue-100",
    //   icon: <Icons.Box />,
    // },
    {
      name: "Suraksha",
      route: "/suraksha",
      color: "bg-purple-100",
      icon: <Icons.Shield />,
    },
    // {
    //   name: "Raksha",
    //   route: "/raksha",
    //   color: "bg-red-100",
    //   icon: <Icons.Shield />,
    // },
    {
      name: "AI Health Assist",
      route: "/healthassist",
      color: "bg-green-100",
      icon: <Icons.Home />,
    },
    {
      name: "Consult a Pharm D",
      route: "/healthassist",
      color: "bg-green-100",
      icon: <Icons.Home />,
    },
  ];

  return (
    <div className="min-h-screen p-6 bg-gray-100 relative">

      {/* ---------------- MAIN CONTENT ---------------- */}
      <main className="flex-1 pt-6 px-4  md:pt-24  sm:px-6 md:px-8 space-y-8">
        {/* ---- GRADIENT HEADER ---- */}
        <div className="bg-gradient-to-r from-teal-500 to-emerald-600 rounded-2xl p-6 sm:p-8 text-white relative overflow-hidden">
          <div className="absolute right-4 top-4 opacity-10 hidden sm:block">
            <Icons.Shield />
          </div>
          <h1 className="text-xl sm:text-2xl md:text-3xl font-bold mb-2">
            Hello,
            <br />
            {userName}
          </h1>
          <p className="text-teal-100 text-sm sm:text-base">
            Your Companion in Crisis, Your Partner in Care.
          </p>
        </div>

        {/* ---- CARDS GRID ---- */}
        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6">
          {cards.map((card, index) => (
            <div
              key={index}
              onClick={() => navigate(card.route)}
              className="bg-white rounded-xl p-6 shadow-sm hover:shadow-lg cursor-pointer transition flex flex-col items-center gap-4 hover:-translate-y-1"
            >
              <div className={`${card.color} p-4 rounded-full`}>
                {card.icon}
              </div>
              <h3 className="font-bold text-slate-700 text-center">
                {card.name}
              </h3>
            </div>
          ))}
        </div>
      </main>
    </div>
  );
};

export default UserDashboard;
</file>

<file path="src/services/api.js">
import axios from 'axios';
const api = axios.create({ baseURL: import.meta.env.VITE_API_URL || 'http://localhost:5000/api' });
export default api;
</file>

<file path="tailwind.config.js">
module.exports = {
  content: [
    "./index.html",
    "./src/**/*.{js,jsx,ts,tsx}",
  ],
  theme: {
    extend: {},
  },
  plugins: [],
};
</file>

<file path="vercel.json">
{
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
</file>

<file path="vite.config.js">
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";

export default defineConfig({
  plugins: [react()],
  build: {
    target: "es2015" // üî• REQUIRED for Safari
  }
});
</file>

</files>
